<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RPG Tycoon - Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --accent: #e94560;
            --accent-light: #ff6b6b;
            --gold: #ffd700;
            --silver: #c0c0c0;
            --bronze: #cd7f32;
            --success: #4ecca3;
            --warning: #feca57;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --border-radius: 12px;
        }

        body {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--accent);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            border: 2px solid var(--gold);
        }

        .player-info h3 {
            font-size: 14px;
            color: var(--text-primary);
        }

        .player-info span {
            font-size: 12px;
            color: var(--gold);
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .currency {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0,0,0,0.3);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 13px;
        }

        .currency.gold { color: var(--gold); }
        .currency.gems { color: #a855f7; }

        /* Stats Bar */
        .stats-bar {
            background: var(--bg-card);
            padding: 15px 20px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item .icon {
            font-size: 20px;
            margin-bottom: 3px;
        }

        .stat-item .value {
            font-size: 14px;
            font-weight: bold;
            color: var(--success);
        }

        .stat-item .label {
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* Progress Bars */
        .progress-section {
            padding: 15px 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .progress-bar-container {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 10px 15px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-fill.health { background: linear-gradient(90deg, #ff6b6b, #ee5a5a); }
        .progress-fill.energy { background: linear-gradient(90deg, #4ecca3, #3db892); }
        .progress-fill.exp { background: linear-gradient(90deg, #a855f7, #9333ea); }

        /* Main Content */
        .main-content {
            padding: 15px;
        }

        /* Section Cards */
        .section-card {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badge {
            background: var(--accent);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
        }

        /* Jobs Section */
        .jobs-grid {
            display: grid;
            gap: 10px;
        }

        .job-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .job-card:hover {
            border-color: var(--accent);
            transform: translateX(5px);
        }

        .job-card.active {
            border-color: var(--success);
            background: rgba(78, 204, 163, 0.1);
        }

        .job-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .job-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .job-icon {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }

        .job-details h4 {
            font-size: 14px;
            margin-bottom: 3px;
        }

        .job-details span {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .job-reward {
            text-align: right;
        }

        .job-reward .amount {
            color: var(--gold);
            font-weight: bold;
            font-size: 14px;
        }

        .job-reward .time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Inventory */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .inventory-slot {
            aspect-ratio: 1;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .inventory-slot:hover {
            border-color: var(--accent);
        }

        .inventory-slot.empty {
            border: 2px dashed rgba(255,255,255,0.1);
        }

        .inventory-slot .item-icon {
            font-size: 28px;
        }

        .inventory-slot .item-count {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: var(--accent);
            padding: 1px 6px;
            border-radius: 8px;
            font-size: 10px;
        }

        .inventory-slot.rare { border-color: #3b82f6; }
        .inventory-slot.epic { border-color: #a855f7; }
        .inventory-slot.legendary { border-color: var(--gold); }

        /* Market */
        .market-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .market-tab {
            flex: 1;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: none;
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
        }

        .market-tab.active {
            background: var(--accent);
            color: white;
        }

        .market-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .market-item {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .market-item-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .market-item-icon {
            width: 40px;
            height: 40px;
            background: var(--bg-secondary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .market-item-details h4 {
            font-size: 13px;
        }

        .market-item-details span {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .buy-btn {
            background: var(--success);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .buy-btn:hover {
            transform: scale(1.05);
        }

        .buy-btn:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
        }

        /* Bank Section */
        .bank-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .bank-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .bank-card:hover {
            border-color: var(--gold);
            transform: translateY(-3px);
        }

        .bank-card .icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .bank-card h4 {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .bank-card p {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .bank-balance {
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);
            color: #1a1a2e;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 15px;
        }

        .bank-balance h3 {
            font-size: 12px;
            opacity: 0.8;
        }

        .bank-balance .amount {
            font-size: 28px;
            font-weight: bold;
        }

        /* Skills Section */
        .skills-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .skill-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 10px;
        }

        .skill-icon {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            background: var(--bg-secondary);
        }

        .skill-info {
            flex: 1;
        }

        .skill-info h4 {
            font-size: 13px;
            margin-bottom: 5px;
        }

        .skill-progress {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .skill-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
        }

        .skill-level {
            background: var(--accent);
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Quests Section */
        .quests-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quest-item {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid var(--warning);
        }

        .quest-item.completed {
            border-left-color: var(--success);
            opacity: 0.7;
        }

        .quest-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .quest-title {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quest-reward {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--gold);
            font-size: 13px;
        }

        .quest-progress {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .quest-bar {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .quest-bar-fill {
            height: 100%;
            background: var(--warning);
        }

        .claim-btn {
            background: var(--gold);
            color: #1a1a2e;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            margin-top: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 12px;
        }

        /* Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .achievement {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .achievement.unlocked {
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.1);
        }

        .achievement.locked {
            opacity: 0.5;
        }

        .achievement .icon {
            font-size: 30px;
            margin-bottom: 8px;
        }

        .achievement h4 {
            font-size: 11px;
        }

        /* Leaderboard */
        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .leaderboard-item {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .leaderboard-item.top-1 {
            background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,215,0,0.05));
            border: 1px solid var(--gold);
        }

        .leaderboard-item.top-2 {
            background: linear-gradient(135deg, rgba(192,192,192,0.2), rgba(192,192,192,0.05));
            border: 1px solid var(--silver);
        }

        .leaderboard-item.top-3 {
            background: linear-gradient(135deg, rgba(205,127,50,0.2), rgba(205,127,50,0.05));
            border: 1px solid var(--bronze);
        }

        .rank {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 8px;
            background: var(--bg-secondary);
        }

        .rank.gold { background: var(--gold); color: #1a1a2e; }
        .rank.silver { background: var(--silver); color: #1a1a2e; }
        .rank.bronze { background: var(--bronze); color: #1a1a2e; }

        .lb-player {
            flex: 1;
        }

        .lb-player h4 {
            font-size: 13px;
        }

        .lb-player span {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .lb-score {
            color: var(--gold);
            font-weight: bold;
        }

        /* Profile Section */
        .profile-header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--accent) 0%, #9333ea 100%);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            margin: 0 auto 10px;
            border: 3px solid var(--gold);
        }

        .profile-name {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .profile-title {
            font-size: 13px;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .profile-stat {
            text-align: center;
        }

        .profile-stat .value {
            font-size: 18px;
            font-weight: bold;
        }

        .profile-stat .label {
            font-size: 11px;
            opacity: 0.8;
        }

        .profile-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .detail-card {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .detail-card .icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .detail-card .value {
            font-size: 16px;
            font-weight: bold;
            color: var(--success);
        }

        .detail-card .label {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Mini Games */
        .minigames-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .minigame-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .minigame-card:hover {
            border-color: var(--accent);
            transform: scale(1.02);
        }

        .minigame-card .icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .minigame-card h4 {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .minigame-card p {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Daily Rewards */
        .daily-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .daily-item {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 10px 5px;
            text-align: center;
            border: 2px solid transparent;
        }

        .daily-item.claimed {
            border-color: var(--success);
            background: rgba(78, 204, 163, 0.1);
        }

        .daily-item.current {
            border-color: var(--gold);
            animation: pulse 2s infinite;
        }

        .daily-item .day {
            font-size: 10px;
            color: var(--text-secondary);
        }

        .daily-item .reward {
            font-size: 18px;
            margin: 5px 0;
        }

        .daily-item .amount {
            font-size: 10px;
            color: var(--gold);
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 5px var(--gold); }
            50% { box-shadow: 0 0 15px var(--gold); }
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-card);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 2px solid rgba(255,255,255,0.1);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            cursor: pointer;
            padding: 5px 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }

        .nav-item.active {
            color: var(--accent);
            background: rgba(233, 69, 96, 0.1);
        }

        .nav-item .icon {
            font-size: 22px;
        }

        .nav-item span {
            font-size: 10px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            max-width: 350px;
            width: 100%;
            text-align: center;
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-icon {
            font-size: 50px;
            margin-bottom: 15px;
        }

        .modal h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .modal p {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .modal-btn.primary {
            background: var(--accent);
            color: white;
        }

        .modal-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: var(--bg-card);
            padding: 15px 25px;
            border-radius: 10px;
            border: 1px solid var(--success);
            z-index: 3000;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast.active {
            transform: translateX(-50%) translateY(0);
        }

        .toast.success { border-color: var(--success); }
        .toast.error { border-color: var(--accent); }
        .toast.warning { border-color: var(--warning); }

        /* Sections visibility */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Equipment Section */
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .equipment-slot {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 2px dashed rgba(255,255,255,0.2);
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .equipment-slot.equipped {
            border: 2px solid var(--success);
            border-style: solid;
        }

        .equipment-slot .slot-icon {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .equipment-slot .slot-name {
            font-size: 10px;
            color: var(--text-secondary);
        }

        /* Pet Section */
        .pet-card {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.05));
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid #a855f7;
            margin-bottom: 15px;
        }

        .pet-icon {
            font-size: 60px;
            margin-bottom: 10px;
        }

        .pet-name {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .pet-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }

        .pet-stat {
            background: rgba(0,0,0,0.3);
            padding: 8px 15px;
            border-radius: 8px;
        }

        /* Settings */
        .settings-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .setting-item {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .setting-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .setting-icon {
            font-size: 22px;
        }

        .toggle-switch {
            width: 50px;
            height: 26px;
            background: rgba(255,255,255,0.1);
            border-radius: 13px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--success);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
        }

        .toggle-switch.active::after {
            left: 26px;
        }

        /* Crafting */
        .crafting-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .craft-item {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .craft-item:hover {
            background: rgba(0,0,0,0.5);
        }

        .craft-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .craft-name {
            font-size: 13px;
            margin-bottom: 5px;
        }

        .craft-cost {
            font-size: 11px;
            color: var(--gold);
        }

        /* Loading */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            flex-direction: column;
            gap: 20px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.1);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Work Animation */
        .working-animation {
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 30px;
            background: rgba(0,0,0,0.5);
            border-radius: 12px;
            margin-top: 15px;
        }

        .working-animation.active {
            display: flex;
        }

        .working-icon {
            font-size: 50px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .working-timer {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            color: var(--success);
        }

        /* Responsive scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 3px;
        }

        /* Upgrade Button */
        .upgrade-btn {
            background: linear-gradient(135deg, var(--gold), #ffaa00);
            color: #1a1a2e;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
        }

        /* Energy Timer */
        .energy-timer {
            font-size: 11px;
            color: var(--warning);
            text-align: center;
            margin-top: 5px;
        }

        /* Properties Table */
        .properties-grid {
            display: grid;
            gap: 10px;
        }

        .property-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .property-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .property-icon {
            font-size: 28px;
        }

        .property-income {
            color: var(--success);
            font-size: 13px;
        }

        /* VIP Badge */
        .vip-badge {
            background: linear-gradient(135deg, var(--gold), #ff8c00);
            color: #1a1a2e;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="app-container" id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="avatar" id="playerAvatar">üë§</div>
                <div class="player-info">
                    <h3 id="playerName">–ò–≥—Ä–æ–∫</h3>
                    <span>–£—Ä–æ–≤–µ–Ω—å <span id="playerLevel">1</span></span>
                </div>
            </div>
            <div class="header-right">
                <div class="currency gold">
                    <span>üí∞</span>
                    <span id="goldAmount">1000</span>
                </div>
                <div class="currency gems">
                    <span>üíé</span>
                    <span id="gemsAmount">50</span>
                </div>
            </div>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="icon">‚öîÔ∏è</div>
                <div class="value" id="statAttack">10</div>
                <div class="label">–ê—Ç–∞–∫–∞</div>
            </div>
            <div class="stat-item">
                <div class="icon">üõ°Ô∏è</div>
                <div class="value" id="statDefense">5</div>
                <div class="label">–ó–∞—â–∏—Ç–∞</div>
            </div>
            <div class="stat-item">
                <div class="icon">‚ö°</div>
                <div class="value" id="statSpeed">8</div>
                <div class="label">–°–∫–æ—Ä–æ—Å—Ç—å</div>
            </div>
            <div class="stat-item">
                <div class="icon">üçÄ</div>
                <div class="value" id="statLuck">3</div>
                <div class="label">–£–¥–∞—á–∞</div>
            </div>
        </div>

        <!-- Progress Bars -->
        <div class="progress-section">
            <div class="progress-bar-container">
                <div class="progress-label">
                    <span>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</span>
                    <span><span id="currentHealth">80</span>/<span id="maxHealth">100</span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill health" id="healthBar" style="width: 80%"></div>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-label">
                    <span>‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
                    <span><span id="currentEnergy">50</span>/<span id="maxEnergy">100</span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill energy" id="energyBar" style="width: 50%"></div>
                </div>
                <div class="energy-timer" id="energyTimer"></div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-label">
                    <span>‚ú® –û–ø—ã—Ç</span>
                    <span><span id="currentExp">250</span>/<span id="maxExp">500</span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill exp" id="expBar" style="width: 50%"></div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- HOME Section -->
            <div class="section active" id="section-home">
                <!-- Daily Rewards -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</h3>
                        <span class="badge">–î–µ–Ω—å <span id="currentDay">3</span></span>
                    </div>
                    <div class="daily-grid">
                        <div class="daily-item claimed">
                            <div class="day">–î–µ–Ω—å 1</div>
                            <div class="reward">üí∞</div>
                            <div class="amount">100</div>
                        </div>
                        <div class="daily-item claimed">
                            <div class="day">–î–µ–Ω—å 2</div>
                            <div class="reward">üíé</div>
                            <div class="amount">5</div>
                        </div>
                        <div class="daily-item current" onclick="claimDailyReward()">
                            <div class="day">–î–µ–Ω—å 3</div>
                            <div class="reward">üì¶</div>
                            <div class="amount">–°—É–Ω–¥—É–∫</div>
                        </div>
                        <div class="daily-item">
                            <div class="day">–î–µ–Ω—å 4</div>
                            <div class="reward">üí∞</div>
                            <div class="amount">300</div>
                        </div>
                        <div class="daily-item">
                            <div class="day">–î–µ–Ω—å 5</div>
                            <div class="reward">‚öîÔ∏è</div>
                            <div class="amount">–û—Ä—É–∂–∏–µ</div>
                        </div>
                        <div class="daily-item">
                            <div class="day">–î–µ–Ω—å 6</div>
                            <div class="reward">üíé</div>
                            <div class="amount">20</div>
                        </div>
                        <div class="daily-item">
                            <div class="day">–î–µ–Ω—å 7</div>
                            <div class="reward">üëë</div>
                            <div class="amount">–ú–ï–ì–ê</div>
                        </div>
                    </div>
                </div>

                <!-- Active Quests -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üìú –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h3>
                        <span class="badge">3 –∞–∫—Ç–∏–≤–Ω—ã—Ö</span>
                    </div>
                    <div class="quests-list">
                        <div class="quest-item">
                            <div class="quest-header">
                                <span class="quest-title">‚öíÔ∏è –ü–µ—Ä–≤–∞—è —Ä–∞–±–æ—Ç–∞</span>
                                <span class="quest-reward">üí∞ 200</span>
                            </div>
                            <div class="quest-progress">–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ª—é–±—É—é —Ä–∞–±–æ—Ç—É (1/1)</div>
                            <div class="quest-bar">
                                <div class="quest-bar-fill" style="width: 100%"></div>
                            </div>
                            <button class="claim-btn" onclick="claimQuestReward(0)">–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É</button>
                        </div>
                        <div class="quest-item">
                            <div class="quest-header">
                                <span class="quest-title">üí∞ –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å</span>
                                <span class="quest-reward">üíé 10</span>
                            </div>
                            <div class="quest-progress">–ù–∞–∫–æ–ø–∏—Ç–µ 5000 –∑–æ–ª–æ—Ç–∞ (1000/5000)</div>
                            <div class="quest-bar">
                                <div class="quest-bar-fill" style="width: 20%"></div>
                            </div>
                        </div>
                        <div class="quest-item">
                            <div class="quest-header">
                                <span class="quest-title">üìà –£—Ä–æ–≤–µ–Ω—å –º–∞—Å—Ç–µ—Ä–∞</span>
                                <span class="quest-reward">üéí –†—é–∫–∑–∞–∫</span>
                            </div>
                            <div class="quest-progress">–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 5 —É—Ä–æ–≤–Ω—è (1/5)</div>
                            <div class="quest-bar">
                                <div class="quest-bar-fill" style="width: 20%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mini Games -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üéÆ –ú–∏–Ω–∏-–∏–≥—Ä—ã</h3>
                    </div>
                    <div class="minigames-grid">
                        <div class="minigame-card" onclick="playSlots()">
                            <div class="icon">üé∞</div>
                            <h4>–°–ª–æ—Ç—ã</h4>
                            <p>–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É!</p>
                        </div>
                        <div class="minigame-card" onclick="playDice()">
                            <div class="icon">üé≤</div>
                            <h4>–ö–æ—Å—Ç–∏</h4>
                            <p>–í—ã–±—Ä–æ—Å—å –±–æ–ª—å—à–µ!</p>
                        </div>
                        <div class="minigame-card" onclick="playWheel()">
                            <div class="icon">üé°</div>
                            <h4>–ö–æ–ª–µ—Å–æ</h4>
                            <p>–ö—Ä—É—Ç–∏ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π!</p>
                        </div>
                        <div class="minigame-card" onclick="playCards()">
                            <div class="icon">üÉè</div>
                            <h4>–ö–∞—Ä—Ç—ã</h4>
                            <p>–£–≥–∞–¥–∞–π –∫–∞—Ä—Ç—É!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JOBS Section -->
            <div class="section" id="section-jobs">
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üíº –†–∞–±–æ—Ç—ã</h3>
                        <span class="badge" id="jobStatus">–°–≤–æ–±–æ–¥–µ–Ω</span>
                    </div>
                    <div class="jobs-grid" id="jobsGrid">
                        <div class="job-card" onclick="startJob(0)" data-job="0">
                            <div class="job-info">
                                <div class="job-icon" style="background: #4ade80;">üßπ</div>
                                <div class="job-details">
                                    <h4>–£–±–æ—Ä—â–∏–∫</h4>
                                    <span>–¢—Ä–µ–±—É–µ—Ç—Å—è: –£—Ä. 1</span>
                                </div>
                            </div>
                            <div class="job-reward">
                                <div class="amount">üí∞ 50</div>
                                <div class="time">30 —Å–µ–∫</div>
                            </div>
                        </div>
                        <div class="job-card" onclick="startJob(1)" data-job="1">
                            <div class="job-info">
                                <div class="job-icon" style="background: #60a5fa;">üì¶</div>
                                <div class="job-details">
                                    <h4>–ì—Ä—É–∑—á–∏–∫</h4>
                                    <span>–¢—Ä–µ–±—É–µ—Ç—Å—è: –£—Ä. 3</span>
                                </div>
                            </div>
                            <div class="job-reward">
                                <div class="amount">üí∞ 120</div>
                                <div class="time">1 –º–∏–Ω</div>
                            </div>
                        </div>
                        <div class="job-card" onclick="startJob(2)" data-job="2">
                            <div class="job-info">
                                <div class="job-icon" style="background: #f472b6;">üöö</div>
                                <div class="job-details">
                                    <h4>–ö—É—Ä—å–µ—Ä</h4>
                                    <span>–¢—Ä–µ–±—É–µ—Ç—Å—è: –£—Ä. 5</span>
                                </div>
                            </div>
                            <div class="job-reward">
                                <div class="amount">üí∞ 250</div>
                                <div class="time">2 –º–∏–Ω</div>
                            </div>
                        </div>
                        <div class="job-card" onclick="startJob(3)" data-job="3">
                            <div class="job-info">
                                <div class="job-icon" style="background: #fbbf24;">üîß</div>
                                <div class="job-details">
                                    <h4>–ú–µ—Ö–∞–Ω–∏–∫</h4>
                                    <span>–¢—Ä–µ–±—É–µ—Ç—Å—è: –£—Ä. 10</span>
                                </div>
                            </div>
                            <div class="job-reward">
                                <div class="amount">üí∞ 500</div>
                                <div class="time">5 –º–∏–Ω</div>
                            </div>
                        </div>
                        <div class="job-card" onclick="startJob(4)" data-job="4">
                            <div class="job-info">
                                <div class="job-icon" style="background: #a78bfa;">üíª</div>
                                <div class="job-details">
                                    <h4>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç</h4>
                                    <span>–¢—Ä–µ–±—É–µ—Ç—Å—è: –£—Ä. 15</span>
                                </div>
                            </div>
                            <div class="job-reward">
                                <div class="amount">üí∞ 1000</div>
                                <div class="time">10 –º–∏–Ω</div>
                            </div>
                        </div>
                        <div class="job-card" onclick="startJob(5)" data-job="5">
                            <div class="job-info">
                                <div class="job-icon" style="background: #f97316;">üè¢</div>
                                <div class="job-details">
                                    <h4>–ú–µ–Ω–µ–¥–∂–µ—Ä</h4>
                                    <span>–¢—Ä–µ–±—É–µ—Ç—Å—è: –£—Ä. 20</span>
                                </div>
                            </div>
                            <div class="job-reward">
                                <div class="amount">üí∞ 2000</div>
                                <div class="time">15 –º–∏–Ω</div>
                            </div>
                        </div>
                    </div>
                    <div class="working-animation" id="workingAnimation">
                        <div class="working-icon" id="workingIcon">‚öíÔ∏è</div>
                        <div class="working-timer" id="workingTimer">00:30</div>
                        <p style="margin-top: 10px; color: var(--text-secondary);" id="workingText">–í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ...</p>
                    </div>
                </div>

                <!-- Skills -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üìä –ù–∞–≤—ã–∫–∏</h3>
                    </div>
                    <div class="skills-list">
                        <div class="skill-item">
                            <div class="skill-icon">üí™</div>
                            <div class="skill-info">
                                <h4>–°–∏–ª–∞</h4>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 45%"></div>
                                </div>
                            </div>
                            <div class="skill-level">–£—Ä. 5</div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-icon">üß†</div>
                            <div class="skill-info">
                                <h4>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</h4>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 30%"></div>
                                </div>
                            </div>
                            <div class="skill-level">–£—Ä. 3</div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-icon">üèÉ</div>
                            <div class="skill-info">
                                <h4>–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å</h4>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 60%"></div>
                                </div>
                            </div>
                            <div class="skill-level">–£—Ä. 6</div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-icon">üó£Ô∏è</div>
                            <div class="skill-info">
                                <h4>–•–∞—Ä–∏–∑–º–∞</h4>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 20%"></div>
                                </div>
                            </div>
                            <div class="skill-level">–£—Ä. 2</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- INVENTORY Section -->
            <div class="section" id="section-inventory">
                <!-- Equipment -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üéñÔ∏è –°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</h3>
                    </div>
                    <div class="equipment-grid">
                        <div class="equipment-slot equipped">
                            <div class="slot-icon">‚öîÔ∏è</div>
                            <div class="slot-name">–û—Ä—É–∂–∏–µ</div>
                        </div>
                        <div class="equipment-slot">
                            <div class="slot-icon">üõ°Ô∏è</div>
                            <div class="slot-name">–©–∏—Ç</div>
                        </div>
                        <div class="equipment-slot equipped">
                            <div class="slot-icon">üëï</div>
                            <div class="slot-name">–ë—Ä–æ–Ω—è</div>
                        </div>
                        <div class="equipment-slot">
                            <div class="slot-icon">ü™ñ</div>
                            <div class="slot-name">–®–ª–µ–º</div>
                        </div>
                        <div class="equipment-slot">
                            <div class="slot-icon">üß§</div>
                            <div class="slot-name">–ü–µ—Ä—á–∞—Ç–∫–∏</div>
                        </div>
                        <div class="equipment-slot equipped">
                            <div class="slot-icon">üë¢</div>
                            <div class="slot-name">–°–∞–ø–æ–≥–∏</div>
                        </div>
                    </div>
                </div>

                <!-- Inventory Grid -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
                        <span class="badge">12/20</span>
                    </div>
                    <div class="inventory-grid">
                        <div class="inventory-slot" onclick="showItemDetails(0)">
                            <span class="item-icon">üó°Ô∏è</span>
                            <span class="item-count">1</span>
                        </div>
                        <div class="inventory-slot rare" onclick="showItemDetails(1)">
                            <span class="item-icon">üèπ</span>
                            <span class="item-count">1</span>
                        </div>
                        <div class="inventory-slot" onclick="showItemDetails(2)">
                            <span class="item-icon">üß™</span>
                            <span class="item-count">5</span>
                        </div>
                        <div class="inventory-slot epic" onclick="showItemDetails(3)">
                            <span class="item-icon">üìú</span>
                            <span class="item-count">2</span>
                        </div>
                        <div class="inventory-slot" onclick="showItemDetails(4)">
                            <span class="item-icon">üçñ</span>
                            <span class="item-count">10</span>
                        </div>
                        <div class="inventory-slot legendary" onclick="showItemDetails(5)">
                            <span class="item-icon">üíç</span>
                            <span class="item-count">1</span>
                        </div>
                        <div class="inventory-slot" onclick="showItemDetails(6)">
                            <span class="item-icon">ü™µ</span>
                            <span class="item-count">25</span>
                        </div>
                        <div class="inventory-slot" onclick="showItemDetails(7)">
                            <span class="item-icon"> ite</span>
                            <span class="item-count">15</span>
                        </div>
                        <div class="inventory-slot rare" onclick="showItemDetails(8)">
                            <span class="item-icon">üîÆ</span>
                            <span class="item-count">3</span>
                        </div>
                        <div class="inventory-slot" onclick="showItemDetails(9)">
                            <span class="item-icon">üóùÔ∏è</span>
                            <span class="item-count">2</span>
                        </div>
                        <div class="inventory-slot" onclick="showItemDetails(10)">
                            <span class="item-icon">üìø</span>
                            <span class="item-count">1</span>
                        </div>
                        <div class="inventory-slot epic" onclick="showItemDetails(11)">
                            <span class="item-icon">‚öóÔ∏è</span>
                            <span class="item-count">1</span>
                        </div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                        <div class="inventory-slot empty"></div>
                    </div>
                </div>

                <!-- Crafting -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">‚öíÔ∏è –ö—Ä–∞—Ñ—Ç</h3>
                    </div>
                    <div class="crafting-grid">
                        <div class="craft-item" onclick="craftItem(0)">
                            <div class="craft-icon">üß™</div>
                            <div class="craft-name">–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è</div>
                            <div class="craft-cost">üåø x3</div>
                        </div>
                        <div class="craft-item" onclick="craftItem(1)">
                            <div class="craft-icon">‚ö°</div>
                            <div class="craft-name">–ó–µ–ª—å–µ —ç–Ω–µ—Ä–≥–∏–∏</div>
                            <div class="craft-cost">üçÑ x2</div>
                        </div>
                        <div class="craft-item" onclick="craftItem(2)">
                            <div class="craft-icon">üó°Ô∏è</div>
                            <div class="craft-name">–ñ–µ–ª–µ–∑–Ω—ã–π –º–µ—á</div>
                            <div class="craft-cost">ü™® x5 + ü™µ x3</div>
                        </div>
                        <div class="craft-item" onclick="craftItem(3)">
                            <div class="craft-icon">üõ°Ô∏è</div>
                            <div class="craft-name">–©–∏—Ç</div>
                            <div class="craft-cost">ü™® x8 + ü™µ x5</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MARKET Section -->
            <div class="section" id="section-market">
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üè™ –†—ã–Ω–æ–∫</h3>
                    </div>
                    <div class="market-tabs">
                        <button class="market-tab active" onclick="switchMarketTab('buy')">–ö—É–ø–∏—Ç—å</button>
                        <button class="market-tab" onclick="switchMarketTab('sell')">–ü—Ä–æ–¥–∞—Ç—å</button>
                        <button class="market-tab" onclick="switchMarketTab('auction')">–ê—É–∫—Ü–∏–æ–Ω</button>
                    </div>
                    <div class="market-items" id="marketItems">
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üß™</div>
                                <div class="market-item-details">
                                    <h4>–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è</h4>
                                    <span>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 50 HP</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(0)">üí∞ 50</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">‚ö°</div>
                                <div class="market-item-details">
                                    <h4>–ó–µ–ª—å–µ —ç–Ω–µ—Ä–≥–∏–∏</h4>
                                    <span>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 30 —ç–Ω–µ—Ä–≥–∏–∏</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(1)">üí∞ 75</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üó°Ô∏è</div>
                                <div class="market-item-details">
                                    <h4>–°—Ç–∞–ª—å–Ω–æ–π –º–µ—á</h4>
                                    <span>+15 –∫ –∞—Ç–∞–∫–µ</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(2)">üí∞ 500</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üõ°Ô∏è</div>
                                <div class="market-item-details">
                                    <h4>–ñ–µ–ª–µ–∑–Ω—ã–π —â–∏—Ç</h4>
                                    <span>+10 –∫ –∑–∞—â–∏—Ç–µ</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(3)">üí∞ 400</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üëï</div>
                                <div class="market-item-details">
                                    <h4>–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è</h4>
                                    <span>+8 –∫ –∑–∞—â–∏—Ç–µ</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(4)">üí∞ 350</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üçñ</div>
                                <div class="market-item-details">
                                    <h4>–ï–¥–∞</h4>
                                    <span>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 20 HP</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(5)">üí∞ 20</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üì¶</div>
                                <div class="market-item-details">
                                    <h4>–õ—É—Ç–±–æ–∫—Å</h4>
                                    <span>–°–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(6)">üíé 10</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üéí</div>
                                <div class="market-item-details">
                                    <h4>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</h4>
                                    <span>+5 —Å–ª–æ—Ç–æ–≤</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyItem(7)">üíé 25</button>
                        </div>
                    </div>
                </div>

                <!-- Pet Store -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üêæ –ü–∏—Ç–æ–º—Ü—ã</h3>
                    </div>
                    <div class="pet-card">
                        <div class="pet-icon">üê∫</div>
                        <div class="pet-name">–í–æ–ª–∫ –¢–µ–Ω–∏</div>
                        <p style="color: var(--text-secondary); font-size: 12px;">–í–∞—à –≤–µ—Ä–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫</p>
                        <div class="pet-stats">
                            <div class="pet-stat">
                                <span>‚öîÔ∏è +5</span>
                            </div>
                            <div class="pet-stat">
                                <span>üçÄ +3</span>
                            </div>
                        </div>
                    </div>
                    <div class="market-items">
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üê±</div>
                                <div class="market-item-details">
                                    <h4>–ö–æ—Ç —É–¥–∞—á–∏</h4>
                                    <span>+10% –∫ –¥—Ä–æ–ø—É</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyPet(0)">üíé 50</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">ü¶Ö</div>
                                <div class="market-item-details">
                                    <h4>–û—Ä—ë–ª</h4>
                                    <span>+15% –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyPet(1)">üíé 75</button>
                        </div>
                        <div class="market-item">
                            <div class="market-item-info">
                                <div class="market-item-icon">üêâ</div>
                                <div class="market-item-details">
                                    <h4>–î—Ä–∞–∫–æ–Ω—á–∏–∫</h4>
                                    <span>+20 –∫ –∞—Ç–∞–∫–µ</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyPet(2)">üíé 150</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BANK Section -->
            <div class="section" id="section-bank">
                <div class="section-card">
                    <div class="bank-balance">
                        <h3>üí≥ –ë–∞–ª–∞–Ω—Å –≤ –±–∞–Ω–∫–µ</h3>
                        <div class="amount" id="bankBalance">5,000</div>
                        <p style="font-size: 11px; opacity: 0.7; margin-top: 5px;">+2% –≤ –¥–µ–Ω—å</p>
                    </div>
                    <div class="bank-options">
                        <div class="bank-card" onclick="bankDeposit()">
                            <div class="icon">üì•</div>
                            <h4>–í–ª–æ–∂–∏—Ç—å</h4>
                            <p>–ü–æ–ª–æ–∂–∏—Ç—å –∑–æ–ª–æ—Ç–æ</p>
                        </div>
                        <div class="bank-card" onclick="bankWithdraw()">
                            <div class="icon">üì§</div>
                            <h4>–°–Ω—è—Ç—å</h4>
                            <p>–ó–∞–±—Ä–∞—Ç—å –∑–æ–ª–æ—Ç–æ</p>
                        </div>
                        <div class="bank-card" onclick="bankLoan()">
                            <div class="icon">üí∏</div>
                            <h4>–ö—Ä–µ–¥–∏—Ç</h4>
                            <p>–í–∑—è—Ç—å –≤ –¥–æ–ª–≥</p>
                        </div>
                        <div class="bank-card" onclick="bankInvest()">
                            <div class="icon">üìà</div>
                            <h4>–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h4>
                            <p>–í–ª–æ–∂–∏—Ç—å –Ω–∞–¥–æ–ª–≥–æ</p>
                        </div>
                    </div>
                </div>

                <!-- Properties -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</h3>
                    </div>
                    <div class="properties-grid">
                        <div class="property-card">
                            <div class="property-info">
                                <div class="property-icon">üèöÔ∏è</div>
                                <div>
                                    <h4>–•–∏–∂–∏–Ω–∞</h4>
                                    <span class="property-income">+10 üí∞/—á–∞—Å</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyProperty(0)">üí∞ 1000</button>
                        </div>
                        <div class="property-card">
                            <div class="property-info">
                                <div class="property-icon">üè†</div>
                                <div>
                                    <h4>–î–æ–º</h4>
                                    <span class="property-income">+50 üí∞/—á–∞—Å</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyProperty(1)">üí∞ 5000</button>
                        </div>
                        <div class="property-card">
                            <div class="property-info">
                                <div class="property-icon">üè¢</div>
                                <div>
                                    <h4>–û—Ñ–∏—Å</h4>
                                    <span class="property-income">+200 üí∞/—á–∞—Å</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyProperty(2)">üí∞ 20000</button>
                        </div>
                        <div class="property-card">
                            <div class="property-info">
                                <div class="property-icon">üè∞</div>
                                <div>
                                    <h4>–ó–∞–º–æ–∫</h4>
                                    <span class="property-income">+1000 üí∞/—á–∞—Å</span>
                                </div>
                            </div>
                            <button class="buy-btn" onclick="buyProperty(3)">üí∞ 100000</button>
                        </div>
                    </div>
                </div>

                <!-- Exchange -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üí± –û–±–º–µ–Ω –≤–∞–ª—é—Ç</h3>
                    </div>
                    <div class="bank-options">
                        <div class="bank-card" onclick="exchangeCurrency('gold')">
                            <div class="icon">üí∞‚û°Ô∏èüíé</div>
                            <h4>–ó–æ–ª–æ—Ç–æ ‚Üí –ì–µ–º—ã</h4>
                            <p>1000 üí∞ = 1 üíé</p>
                        </div>
                        <div class="bank-card" onclick="exchangeCurrency('gems')">
                            <div class="icon">üíé‚û°Ô∏èüí∞</div>
                            <h4>–ì–µ–º—ã ‚Üí –ó–æ–ª–æ—Ç–æ</h4>
                            <p>1 üíé = 800 üí∞</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PROFILE Section -->
            <div class="section" id="section-profile">
                <div class="section-card">
                    <div class="profile-header">
                        <div class="profile-avatar">üë§</div>
                        <div class="profile-name" id="profileName">–ò–≥—Ä–æ–∫<span class="vip-badge">VIP</span></div>
                        <div class="profile-title">üèÜ –ù–∞—á–∏–Ω–∞—é—â–∏–π –∞–≤–∞–Ω—Ç—é—Ä–∏—Å—Ç</div>
                        <div class="profile-stats">
                            <div class="profile-stat">
                                <div class="value" id="profileLevel">1</div>
                                <div class="label">–£—Ä–æ–≤–µ–Ω—å</div>
                            </div>
                            <div class="profile-stat">
                                <div class="value" id="profileDays">3</div>
                                <div class="label">–î–Ω–µ–π –≤ –∏–≥—Ä–µ</div>
                            </div>
                            <div class="profile-stat">
                                <div class="value" id="profileQuests">12</div>
                                <div class="label">–ó–∞–¥–∞–Ω–∏–π</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    </div>
                    <div class="profile-details">
                        <div class="detail-card">
                            <div class="icon">üí∞</div>
                            <div class="value" id="totalEarned">15,420</div>
                            <div class="label">–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                        </div>
                        <div class="detail-card">
                            <div class="icon">‚öîÔ∏è</div>
                            <div class="value" id="totalBattles">48</div>
                            <div class="label">–ë–∏—Ç–≤ –≤—ã–∏–≥—Ä–∞–Ω–æ</div>
                        </div>
                        <div class="detail-card">
                            <div class="icon">üì¶</div>
                            <div class="value" id="itemsCollected">156</div>
                            <div class="label">–ü—Ä–µ–¥–º–µ—Ç–æ–≤ —Å–æ–±—Ä–∞–Ω–æ</div>
                        </div>
                        <div class="detail-card">
                            <div class="icon">‚è±Ô∏è</div>
                            <div class="value" id="playTime">24—á</div>
                            <div class="label">–í—Ä–µ–º—è –≤ –∏–≥—Ä–µ</div>
                        </div>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                        <span class="badge">5/20</span>
                    </div>
                    <div class="achievements-grid">
                        <div class="achievement unlocked">
                            <div class="icon">üåü</div>
                            <h4>–ü–µ—Ä–≤—ã–π —à–∞–≥</h4>
                        </div>
                        <div class="achievement unlocked">
                            <div class="icon">üíº</div>
                            <h4>–†–∞–±–æ—Ç—è–≥–∞</h4>
                        </div>
                        <div class="achievement unlocked">
                            <div class="icon">üí∞</div>
                            <h4>–ë–æ–≥–∞—Ç–µ–π</h4>
                        </div>
                        <div class="achievement unlocked">
                            <div class="icon">‚öîÔ∏è</div>
                            <h4>–í–æ–∏–Ω</h4>
                        </div>
                        <div class="achievement unlocked">
                            <div class="icon">üéÆ</div>
                            <h4>–ò–≥—Ä–æ–º–∞–Ω</h4>
                        </div>
                        <div class="achievement locked">
                            <div class="icon">üèÜ</div>
                            <h4>–ß–µ–º–ø–∏–æ–Ω</h4>
                        </div>
                        <div class="achievement locked">
                            <div class="icon">üëë</div>
                            <h4>–ö–æ—Ä–æ–ª—å</h4>
                        </div>
                        <div class="achievement locked">
                            <div class="icon">üêâ</div>
                            <h4>–î—Ä–∞–∫–æ–Ω–æ–±–æ—Ä–µ—Ü</h4>
                        </div>
                        <div class="achievement locked">
                            <div class="icon">üíé</div>
                            <h4>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä</h4>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">üèÜ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
                    </div>
                    <div class="leaderboard-list">
                        <div class="leaderboard-item top-1">
                            <div class="rank gold">1</div>
                            <div class="lb-player">
                                <h4>DragonSlayer</h4>
                                <span>–£—Ä–æ–≤–µ–Ω—å 50</span>
                            </div>
                            <div class="lb-score">1,234,567</div>
                        </div>
                        <div class="leaderboard-item top-2">
                            <div class="rank silver">2</div>
                            <div class="lb-player">
                                <h4>ShadowNinja</h4>
                                <span>–£—Ä–æ–≤–µ–Ω—å 48</span>
                            </div>
                            <div class="lb-score">987,654</div>
                        </div>
                        <div class="leaderboard-item top-3">
                            <div class="rank bronze">3</div>
                            <div class="lb-player">
                                <h4>MagicWizard</h4>
                                <span>–£—Ä–æ–≤–µ–Ω—å 45</span>
                            </div>
                            <div class="lb-score">765,432</div>
                        </div>
                        <div class="leaderboard-item">
                            <div class="rank">4</div>
                            <div class="lb-player">
                                <h4>IronKnight</h4>
                                <span>–£—Ä–æ–≤–µ–Ω—å 42</span>
                            </div>
                            <div class="lb-score">543,210</div>
                        </div>
                        <div class="leaderboard-item" style="background: rgba(233, 69, 96, 0.2); border: 1px solid var(--accent);">
                            <div class="rank">127</div>
                            <div class="lb-player">
                                <h4>–í—ã</h4>
                                <span>–£—Ä–æ–≤–µ–Ω—å 1</span>
                            </div>
                            <div class="lb-score">1,000</div>
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    </div>
                    <div class="settings-list">
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üîî</span>
                                <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            </div>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üîä</span>
                                <span>–ó–≤—É–∫–∏</span>
                            </div>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üéµ</span>
                                <span>–ú—É–∑—ã–∫–∞</span>
                            </div>
                            <div class="toggle-switch" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üåô</span>
                                <span>–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span>
                            </div>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üíæ</span>
                                <span>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</span>
                            </div>
                            <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" onclick="switchSection('home')">
                <span class="icon">üè†</span>
                <span>–ì–ª–∞–≤–Ω–∞—è</span>
            </div>
            <div class="nav-item" onclick="switchSection('jobs')">
                <span class="icon">üíº</span>
                <span>–†–∞–±–æ—Ç–∞</span>
            </div>
            <div class="nav-item" onclick="switchSection('inventory')">
                <span class="icon">üéí</span>
                <span>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
            </div>
            <div class="nav-item" onclick="switchSection('market')">
                <span class="icon">üè™</span>
                <span>–†—ã–Ω–æ–∫</span>
            </div>
            <div class="nav-item" onclick="switchSection('bank')">
                <span class="icon">üè¶</span>
                <span>–ë–∞–Ω–∫</span>
            </div>
            <div class="nav-item" onclick="switchSection('profile')">
                <span class="icon">üë§</span>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
        </nav>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-icon" id="modalIcon">üéâ</div>
            <h3 id="modalTitle">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h3>
            <p id="modalText">–í—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–∞–≥—Ä–∞–¥—É!</p>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button class="modal-btn primary" id="modalAction" onclick="modalConfirm()">–û–ö</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span id="toastIcon">‚úÖ</span>
        <span id="toastText">–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!</span>
    </div>

    <script>
        // Initialize Telegram WebApp
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        // Game State
        let gameState = {
            player: {
                name: tg?.initDataUnsafe?.user?.first_name || '–ò–≥—Ä–æ–∫',
                level: 1,
                exp: 250,
                maxExp: 500,
                gold: 1000,
                gems: 50,
                health: 80,
                maxHealth: 100,
                energy: 50,
                maxEnergy: 100,
                attack: 10,
                defense: 5,
                speed: 8,
                luck: 3,
                bankBalance: 5000
            },
            jobs: [
                { name: '–£–±–æ—Ä—â–∏–∫', reward: 50, time: 30, level: 1, icon: 'üßπ', energyCost: 10 },
                { name: '–ì—Ä—É–∑—á–∏–∫', reward: 120, time: 60, level: 3, icon: 'üì¶', energyCost: 20 },
                { name: '–ö—É—Ä—å–µ—Ä', reward: 250, time: 120, level: 5, icon: 'üöö', energyCost: 30 },
                { name: '–ú–µ—Ö–∞–Ω–∏–∫', reward: 500, time: 300, level: 10, icon: 'üîß', energyCost: 40 },
                { name: '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç', reward: 1000, time: 600, level: 15, icon: 'üíª', energyCost: 50 },
                { name: '–ú–µ–Ω–µ–¥–∂–µ—Ä', reward: 2000, time: 900, level: 20, icon: 'üè¢', energyCost: 60 }
            ],
            currentJob: null,
            jobEndTime: null,
            settings: {
                notifications: true,
                sounds: true,
                music: false,
                darkTheme: true,
                autoSave: true
            },
            inventory: [],
            dailyRewardDay: 3,
            dailyRewardClaimed: false
        };

        // Load saved state
        function loadGame() {
            const saved = localStorage.getItem('rpgTycoonSave');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    gameState = { ...gameState, ...parsed };
                } catch (e) {
                    console.log('Failed to load save');
                }
            }
            updateUI();
        }

        // Save game state
        function saveGame() {
            localStorage.setItem('rpgTycoonSave', JSON.stringify(gameState));
        }

        // Update UI
        function updateUI() {
            document.getElementById('playerName').textContent = gameState.player.name;
            document.getElementById('profileName').innerHTML = gameState.player.name + '<span class="vip-badge">VIP</span>';
            document.getElementById('playerLevel').textContent = gameState.player.level;
            document.getElementById('profileLevel').textContent = gameState.player.level;
            
            document.getElementById('goldAmount').textContent = formatNumber(gameState.player.gold);
            document.getElementById('gemsAmount').textContent = formatNumber(gameState.player.gems);
            
            document.getElementById('currentHealth').textContent = gameState.player.health;
            document.getElementById('maxHealth').textContent = gameState.player.maxHealth;
            document.getElementById('healthBar').style.width = (gameState.player.health / gameState.player.maxHealth * 100) + '%';
            
            document.getElementById('currentEnergy').textContent = gameState.player.energy;
            document.getElementById('maxEnergy').textContent = gameState.player.maxEnergy;
            document.getElementById('energyBar').style.width = (gameState.player.energy / gameState.player.maxEnergy * 100) + '%';
            
            document.getElementById('currentExp').textContent = gameState.player.exp;
            document.getElementById('maxExp').textContent = gameState.player.maxExp;
            document.getElementById('expBar').style.width = (gameState.player.exp / gameState.player.maxExp * 100) + '%';
            
            document.getElementById('statAttack').textContent = gameState.player.attack;
            document.getElementById('statDefense').textContent = gameState.player.defense;
            document.getElementById('statSpeed').textContent = gameState.player.speed;
            document.getElementById('statLuck').textContent = gameState.player.luck;
            
            document.getElementById('bankBalance').textContent = formatNumber(gameState.player.bankBalance);
            
            updateJobCards();
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        function updateJobCards() {
            const cards = document.querySelectorAll('.job-card');
            cards.forEach((card, index) => {
                const job = gameState.jobs[index];
                if (gameState.player.level < job.level) {
                    card.classList.add('locked');
                } else {
                    card.classList.remove('locked');
                }
                
                if (gameState.currentJob === index) {
                    card.classList.add('active');
                } else {
                    card.classList.remove('active');
                }
            });
        }

        // Section Navigation
        function switchSection(sectionName) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById('section-' + sectionName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Job System
        function startJob(jobIndex) {
            const job = gameState.jobs[jobIndex];
            
            if (gameState.player.level < job.level) {
                showToast('–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å ' + job.level, 'error');
                return;
            }
            
            if (gameState.currentJob !== null) {
                showToast('–í—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ!', 'warning');
                return;
            }
            
            if (gameState.player.energy < job.energyCost) {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
                return;
            }
            
            gameState.player.energy -= job.energyCost;
            gameState.currentJob = jobIndex;
            gameState.jobEndTime = Date.now() + (job.time * 1000);
            
            document.getElementById('jobStatus').textContent = '–†–∞–±–æ—Ç–∞–µ—Ç';
            document.getElementById('workingIcon').textContent = job.icon;
            document.getElementById('workingText').textContent = '–í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ: ' + job.name;
            document.getElementById('workingAnimation').classList.add('active');
            
            updateUI();
            startJobTimer();
            saveGame();
        }

        function startJobTimer() {
            const timerEl = document.getElementById('workingTimer');
            
            const interval = setInterval(() => {
                if (gameState.jobEndTime === null) {
                    clearInterval(interval);
                    return;
                }
                
                const remaining = Math.max(0, gameState.jobEndTime - Date.now());
                const seconds = Math.floor(remaining / 1000);
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                
                timerEl.textContent = String(minutes).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
                
                if (remaining <= 0) {
                    clearInterval(interval);
                    completeJob();
                }
            }, 100);
        }

        function completeJob() {
            const job = gameState.jobs[gameState.currentJob];
            const bonus = Math.floor(Math.random() * gameState.player.luck * 10);
            const totalReward = job.reward + bonus;
            
            gameState.player.gold += totalReward;
            gameState.player.exp += Math.floor(job.reward / 10);
            
            // Check level up
            while (gameState.player.exp >= gameState.player.maxExp) {
                gameState.player.exp -= gameState.player.maxExp;
                gameState.player.level++;
                gameState.player.maxExp = Math.floor(gameState.player.maxExp * 1.5);
                gameState.player.maxHealth += 10;
                gameState.player.maxEnergy += 5;
                gameState.player.health = gameState.player.maxHealth;
                gameState.player.energy = gameState.player.maxEnergy;
                showModal('üéâ', '–£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω!', '–í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ' + gameState.player.level + '!');
            }
            
            gameState.currentJob = null;
            gameState.jobEndTime = null;
            
            document.getElementById('jobStatus').textContent = '–°–≤–æ–±–æ–¥–µ–Ω';
            document.getElementById('workingAnimation').classList.remove('active');
            
            showToast('–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ' + totalReward + ' üí∞', 'success');
            updateUI();
            saveGame();
        }

        // Market System
        function switchMarketTab(tab) {
            document.querySelectorAll('.market-tab').forEach(t => t.classList.remove('active'));
            event.currentTarget.classList.add('active');
            // Could load different items based on tab
        }

        function buyItem(itemIndex) {
            const prices = [50, 75, 500, 400, 350, 20, 0, 0];
            const gemPrices = [0, 0, 0, 0, 0, 0, 10, 25];
            
            if (gemPrices[itemIndex] > 0) {
                if (gameState.player.gems >= gemPrices[itemIndex]) {
                    gameState.player.gems -= gemPrices[itemIndex];
                    showToast('–ü—Ä–µ–¥–º–µ—Ç –∫—É–ø–ª–µ–Ω!', 'success');
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–µ–º–æ–≤!', 'error');
                    return;
                }
            } else {
                if (gameState.player.gold >= prices[itemIndex]) {
                    gameState.player.gold -= prices[itemIndex];
                    showToast('–ü—Ä–µ–¥–º–µ—Ç –∫—É–ø–ª–µ–Ω!', 'success');
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!', 'error');
                    return;
                }
            }
            
            // Apply item effects
            if (itemIndex === 0) gameState.player.health = Math.min(gameState.player.maxHealth, gameState.player.health + 50);
            if (itemIndex === 1) gameState.player.energy = Math.min(gameState.player.maxEnergy, gameState.player.energy + 30);
            if (itemIndex === 2) gameState.player.attack += 15;
            if (itemIndex === 3) gameState.player.defense += 10;
            if (itemIndex === 4) gameState.player.defense += 8;
            if (itemIndex === 5) gameState.player.health = Math.min(gameState.player.maxHealth, gameState.player.health + 20);
            
            updateUI();
            saveGame();
        }

        function buyPet(petIndex) {
            const prices = [50, 75, 150];
            if (gameState.player.gems >= prices[petIndex]) {
                gameState.player.gems -= prices[petIndex];
                showToast('–ü–∏—Ç–æ–º–µ—Ü –∫—É–ø–ª–µ–Ω!', 'success');
                updateUI();
                saveGame();
            } else {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–µ–º–æ–≤!', 'error');
            }
        }

        // Bank System
        function bankDeposit() {
            showModal('üì•', '–í–ª–æ–∂–∏—Ç—å –∑–æ–ª–æ—Ç–æ', '–í–ª–æ–∂–∏—Ç—å 500 –∑–æ–ª–æ—Ç–∞ –≤ –±–∞–Ω–∫?', () => {
                if (gameState.player.gold >= 500) {
                    gameState.player.gold -= 500;
                    gameState.player.bankBalance += 500;
                    showToast('–í–ª–æ–∂–µ–Ω–æ 500 –∑–æ–ª–æ—Ç–∞', 'success');
                    updateUI();
                    saveGame();
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!', 'error');
                }
            });
        }

        function bankWithdraw() {
            showModal('üì§', '–°–Ω—è—Ç—å –∑–æ–ª–æ—Ç–æ', '–°–Ω—è—Ç—å 500 –∑–æ–ª–æ—Ç–∞ –∏–∑ –±–∞–Ω–∫–∞?', () => {
                if (gameState.player.bankBalance >= 500) {
                    gameState.player.bankBalance -= 500;
                    gameState.player.gold += 500;
                    showToast('–°–Ω—è—Ç–æ 500 –∑–æ–ª–æ—Ç–∞', 'success');
                    updateUI();
                    saveGame();
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –≤ –±–∞–Ω–∫–µ!', 'error');
                }
            });
        }

        function bankLoan() {
            showModal('üí∏', '–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç', '–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç 1000 –∑–æ–ª–æ—Ç–∞ –ø–æ–¥ 10%?', () => {
                gameState.player.gold += 1000;
                showToast('–ö—Ä–µ–¥–∏—Ç –ø–æ–ª—É—á–µ–Ω!', 'success');
                updateUI();
                saveGame();
            });
        }

        function bankInvest() {
            showModal('üìà', '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å 1000 –∑–æ–ª–æ—Ç–∞? –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª: +50% —á–µ—Ä–µ–∑ 24—á', () => {
                if (gameState.player.gold >= 1000) {
                    gameState.player.gold -= 1000;
                    showToast('–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞!', 'success');
                    updateUI();
                    saveGame();
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!', 'error');
                }
            });
        }

        function buyProperty(propIndex) {
            const prices = [1000, 5000, 20000, 100000];
            if (gameState.player.gold >= prices[propIndex]) {
                gameState.player.gold -= prices[propIndex];
                showToast('–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –∫—É–ø–ª–µ–Ω–∞!', 'success');
                updateUI();
                saveGame();
            } else {
                showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!', 'error');
            }
        }

        function exchangeCurrency(type) {
            if (type === 'gold') {
                if (gameState.player.gold >= 1000) {
                    gameState.player.gold -= 1000;
                    gameState.player.gems += 1;
                    showToast('–û–±–º–µ–Ω—è–Ω–æ –Ω–∞ 1 üíé', 'success');
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!', 'error');
                }
            } else {
                if (gameState.player.gems >= 1) {
                    gameState.player.gems -= 1;
                    gameState.player.gold += 800;
                    showToast('–û–±–º–µ–Ω—è–Ω–æ –Ω–∞ 800 üí∞', 'success');
                } else {
                    showToast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–µ–º–æ–≤!', 'error');
                }
            }
            updateUI();
            saveGame();
        }

        // Mini Games
        function playSlots() {
            if (gameState.player.gold < 50) {
                showToast('–ù—É–∂–Ω–æ 50 –∑–æ–ª–æ—Ç–∞ –¥–ª—è –∏–≥—Ä—ã!', 'error');
                return;
            }
            gameState.player.gold -= 50;
            
            const symbols = ['üçí', 'üçã', 'üçä', '7Ô∏è‚É£', 'üíé', 'üé∞'];
            const results = [
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)]
            ];
            
            let win = 0;
            if (results[0] === results[1] && results[1] === results[2]) {
                if (results[0] === 'üíé') win = 500;
                else if (results[0] === '7Ô∏è‚É£') win = 300;
                else win = 150;
            } else if (results[0] === results[1] || results[1] === results[2]) {
                win = 75;
            }
            
            gameState.player.gold += win;
            showModal('üé∞', results.join(' '), win > 0 ? '–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ' + win + ' üí∞!' : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!');
            updateUI();
            saveGame();
        }

        function playDice() {
            if (gameState.player.gold < 30) {
                showToast('–ù—É–∂–Ω–æ 30 –∑–æ–ª–æ—Ç–∞ –¥–ª—è –∏–≥—Ä—ã!', 'error');
                return;
            }
            gameState.player.gold -= 30;
            
            const playerRoll = Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;
            const opponentRoll = Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;
            
            let result = '';
            if (playerRoll > opponentRoll) {
                const win = 60;
                gameState.player.gold += win;
                result = '–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ' + win + ' üí∞!';
            } else if (playerRoll < opponentRoll) {
                result = '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!';
            } else {
                gameState.player.gold += 30;
                result = '–ù–∏—á—å—è! –°—Ç–∞–≤–∫–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞.';
            }
            
            showModal('üé≤', '–í—ã: ' + playerRoll + ' | –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫: ' + opponentRoll, result);
            updateUI();
            saveGame();
        }

        function playWheel() {
            if (gameState.player.gems < 1) {
                showToast('–ù—É–∂–µ–Ω 1 –≥–µ–º –¥–ª—è –∏–≥—Ä—ã!', 'error');
                return;
            }
            gameState.player.gems -= 1;
            
            const prizes = [
                { text: '100 üí∞', gold: 100, gems: 0 },
                { text: '250 üí∞', gold: 250, gems: 0 },
                { text: '500 üí∞', gold: 500, gems: 0 },
                { text: '2 üíé', gold: 0, gems: 2 },
                { text: '5 üíé', gold: 0, gems: 5 },
                { text: '–ù–∏—á–µ–≥–æ', gold: 0, gems: 0 }
            ];
            
            const prize = prizes[Math.floor(Math.random() * prizes.length)];
            gameState.player.gold += prize.gold;
            gameState.player.gems += prize.gems;
            
            showModal('üé°', '–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã', '–í—ã –ø–æ–ª—É—á–∏–ª–∏: ' + prize.text);
            updateUI();
            saveGame();
        }

        function playCards() {
            if (gameState.player.gold < 25) {
                showToast('–ù—É–∂–Ω–æ 25 –∑–æ–ª–æ—Ç–∞ –¥–ª—è –∏–≥—Ä—ã!', 'error');
                return;
            }
            gameState.player.gold -= 25;
            
            const cards = ['üÇ°', 'üÇ¢', 'üÇ£', 'üÇ§', 'üÇ•', 'üÇ¶', 'üÇß', 'üÇ®', 'üÇ©', 'üÇ™', 'üÇ´', 'üÇ≠', 'üÇÆ'];
            const hiddenCard = Math.floor(Math.random() * 13);
            const guessHigh = Math.random() > 0.5;
            const nextCard = Math.floor(Math.random() * 13);
            
            let win = false;
            if (guessHigh && nextCard > hiddenCard) win = true;
            if (!guessHigh && nextCard < hiddenCard) win = true;
            
            if (win) {
                gameState.player.gold += 50;
                showModal('üÉè', cards[hiddenCard] + ' ‚Üí ' + cards[nextCard], '–£–≥–∞–¥–∞–ª–∏! +50 üí∞');
            } else {
                showModal('üÉè', cards[hiddenCard] + ' ‚Üí ' + cards[nextCard], '–ù–µ —É–≥–∞–¥–∞–ª–∏!');
            }
            
            updateUI();
            saveGame();
        }

        // Daily Rewards
        function claimDailyReward() {
            if (gameState.dailyRewardClaimed) {
                showToast('–£–∂–µ –ø–æ–ª—É—á–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è!', 'warning');
                return;
            }
            
            const rewards = [
                { gold: 100, gems: 0 },
                { gold: 0, gems: 5 },
                { gold: 200, gems: 2 },
                { gold: 300, gems: 0 },
                { gold: 0, gems: 10 },
                { gold: 0, gems: 20 },
                { gold: 1000, gems: 50 }
            ];
            
            const reward = rewards[gameState.dailyRewardDay - 1];
            gameState.player.gold += reward.gold;
            gameState.player.gems += reward.gems;
            gameState.dailyRewardClaimed = true;
            
            let rewardText = '';
            if (reward.gold > 0) rewardText += reward.gold + ' üí∞ ';
            if (reward.gems > 0) rewardText += reward.gems + ' üíé';
            
            showModal('üéÅ', '–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞!', '–í—ã –ø–æ–ª—É—á–∏–ª–∏: ' + rewardText);
            updateUI();
            saveGame();
        }

        function claimQuestReward(questIndex) {
            const rewards = [200, 0, 0];
            if (rewards[questIndex] > 0) {
                gameState.player.gold += rewards[questIndex];
                showToast('–ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞: ' + rewards[questIndex] + ' üí∞', 'success');
                updateUI();
                saveGame();
            }
        }

        // Crafting
        function craftItem(itemIndex) {
            showToast('–ü—Ä–µ–¥–º–µ—Ç —Å–∫—Ä–∞—Ñ—á–µ–Ω!', 'success');
        }

        // Inventory
        function showItemDetails(itemIndex) {
            const items = [
                { name: '–ñ–µ–ª–µ–∑–Ω—ã–π –º–µ—á', desc: '+5 –∫ –∞—Ç–∞–∫–µ', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–≠–ª—å—Ñ–∏–π—Å–∫–∏–π –ª—É–∫', desc: '+8 –∫ –∞—Ç–∞–∫–µ', rarity: '–†–µ–¥–∫–∏–π' },
                { name: '–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è', desc: '–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 50 HP', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–î—Ä–µ–≤–Ω–∏–π —Å–≤–∏—Ç–æ–∫', desc: '+100 –æ–ø—ã—Ç–∞', rarity: '–≠–ø–∏—á–µ—Å–∫–∏–π' },
                { name: '–ú—è—Å–æ', desc: '–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 20 HP', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–ö–æ–ª—å—Ü–æ –¥—Ä–∞–∫–æ–Ω–∞', desc: '+10 –∫–æ –≤—Å–µ–º —Å—Ç–∞—Ç–∞–º', rarity: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π' },
                { name: '–î—Ä–µ–≤–µ—Å–∏–Ω–∞', desc: '–ú–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–†—É–¥–∞', desc: '–ú–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª', desc: '+5 –∫ —É–¥–∞—á–µ', rarity: '–†–µ–¥–∫–∏–π' },
                { name: '–ö–ª—é—á –æ—Ç —Å—É–Ω–¥—É–∫–∞', desc: '–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—É–Ω–¥—É–∫–∏', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–ê–º—É–ª–µ—Ç', desc: '+3 –∫ –∑–∞—â–∏—Ç–µ', rarity: '–û–±—ã—á–Ω—ã–π' },
                { name: '–≠–ª–∏–∫—Å–∏—Ä —Å–∏–ª—ã', desc: '+10 –∫ –∞—Ç–∞–∫–µ –Ω–∞ 1 —á–∞—Å', rarity: '–≠–ø–∏—á–µ—Å–∫–∏–π' }
            ];
            
            if (items[itemIndex]) {
                showModal('üì¶', items[itemIndex].name, items[itemIndex].desc + '\n' + items[itemIndex].rarity);
            }
        }

        // Settings
        function toggleSetting(element) {
            element.classList.toggle('active');
        }

        // Modal System
        let modalCallback = null;

        function showModal(icon, title, text, callback) {
            document.getElementById('modalIcon').textContent = icon;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalText').textContent = text;
            document.getElementById('modalOverlay').classList.add('active');
            modalCallback = callback || null;
            
            if (callback) {
                document.getElementById('modalAction').style.display = 'block';
            } else {
                document.getElementById('modalAction').style.display = 'none';
            }
        }

        function closeModal(event) {
            if (event && event.target !== event.currentTarget) return;
            document.getElementById('modalOverlay').classList.remove('active');
            modalCallback = null;
        }

        function modalConfirm() {
            if (modalCallback) {
                modalCallback();
            }
            closeModal();
        }

        // Toast System
        function showToast(text, type = 'success') {
            const toast = document.getElementById('toast');
            const icons = { success: '‚úÖ', error: '‚ùå', warning: '‚ö†Ô∏è' };
            
            document.getElementById('toastIcon').textContent = icons[type] || '‚úÖ';
            document.getElementById('toastText').textContent = text;
            
            toast.className = 'toast ' + type;
            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // Energy Regeneration
        setInterval(() => {
            if (gameState.player.energy < gameState.player.maxEnergy) {
                gameState.player.energy = Math.min(gameState.player.maxEnergy, gameState.player.energy + 1);
                updateUI();
            }
        }, 30000); // 1 energy per 30 seconds

        // Bank Interest
        setInterval(() => {
            gameState.player.bankBalance = Math.floor(gameState.player.bankBalance * 1.0001);
            updateUI();
            saveGame();
        }, 60000); // Small interest every minute

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadGame();
            
            // Check for ongoing job
            if (gameState.jobEndTime && gameState.jobEndTime > Date.now()) {
                document.getElementById('jobStatus').textContent = '–†–∞–±–æ—Ç–∞–µ—Ç';
                document.getElementById('workingAnimation').classList.add('active');
                startJobTimer();
            } else if (gameState.currentJob !== null) {
                completeJob();
            }
        });

        // Auto-save
        setInterval(saveGame, 30000);
    </script>
</body>
</html>
