<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Medieval Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* –ü–ê–ù–ï–õ–¨ –†–ï–°–£–†–°–û–í */
        .header {
            display: flex;
            justify-content: space-around;
            background: #1f1f1f;
            padding: 15px 0;
            border-bottom: 2px solid #d4af37;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .res { font-size: 1.2em; }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .screen { display: none; }
        .screen.active { display: flex; flex-direction: column; gap: 15px; }

        /* –ö–ê–†–¢–û–ß–ö–ò –ú–ï–ù–Æ/–†–ê–ë–û–¢ */
        .item-card {
            background: #252525;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            transition: 0.2s;
        }

        .item-card:active {
            transform: scale(0.96);
            background: #303030;
            border-color: #d4af37;
        }

        .icon-box { font-size: 2.5em; }
        .info-box h3 { margin: 0; color: #d4af37; }
        .info-box p { margin: 5px 0 0 0; font-size: 0.9em; color: #aaa; }

        /* –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ */
        .bottom-nav {
            display: flex;
            background: #1f1f1f;
            border-top: 1px solid #333;
            padding: 10px 0;
            padding-bottom: env(safe-area-inset-bottom); /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö iPhone */
        }

        .nav-btn {
            flex: 1;
            text-align: center;
            font-size: 0.8em;
            color: #888;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nav-btn.active { color: #d4af37; }
        .nav-btn span { font-size: 1.6em; }

        .title { text-align: center; color: #d4af37; margin: 0 0 10px 0; }
    </style>
</head>
<body>

    <div class="header">
        <div class="res">ü™ô <span id="gold">0</span></div>
        <div class="res">üíé <span id="emeralds">0</span></div>
    </div>

    <div class="main-content">
        
        <div id="screen-work" class="screen active">
            <h2 class="title">–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</h2>
            
            <div class="item-card" onclick="doWork('port')">
                <div class="icon-box">üé£</div>
                <div class="info-box">
                    <h3>–†—ã–±–∞–ª–∫–∞ –≤ –ø–æ—Ä—Ç—É</h3>
                    <p>–°—Ç–∞–±–∏–ª—å–Ω–æ +15 –∑–æ–ª–æ—Ç–∞</p>
                </div>
            </div>

            <div class="item-card" onclick="doWork('mine')">
                <div class="icon-box">‚õèÔ∏è</div>
                <div class="info-box">
                    <h3>–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —Ä—É–¥–Ω–∏–∫</h3>
                    <p>+10 –∑–æ–ª–æ—Ç–∞ (—à–∞–Ω—Å –Ω–∞ –∏–∑—É–º—Ä—É–¥)</p>
                </div>
            </div>
        </div>

        <div id="screen-shop" class="screen">
            <h2 class="title">–ú–∞–≥–∞–∑–∏–Ω</h2>
            <p style="text-align: center; opacity: 0.5;">–¢—É—Ç —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è —Ç–æ–≤–∞—Ä—ã...</p>
        </div>

        <div id="screen-profile" class="screen">
            <h2 class="title">–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
            <div class="item-card">
                <div class="icon-box">üë§</div>
                <div class="info-box">
                    <h3 id="user-name">–ò–≥—Ä–æ–∫</h3>
                    <p>–°—Ç–∞—Ç—É—Å: –ù–∞—á–∏–Ω–∞—é—â–∏–π</p>
                </div>
            </div>
        </div>

    </div>

    <div class="bottom-nav">
        <div class="nav-btn active" onclick="switchTab('work', this)">
            <span>‚öíÔ∏è</span> –†–∞–±–æ—Ç–∞
        </div>
        <div class="nav-btn" onclick="switchTab('shop', this)">
            <span>üí∞</span> –õ–∞–≤–∫–∞
        </div>
        <div class="nav-btn" onclick="switchTab('profile', this)">
            <span>üõ°Ô∏è</span> –ì–µ—Ä–æ–π
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let gold = 0;
        let emeralds = 0;

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ –º–µ–Ω—é
        function switchTab(screenId, el) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById('screen-' + screenId).classList.add('active');
            el.classList.add('active');

            tg.HapticFeedback.impactOccurred('light');
        }

        // –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
        function doWork(type) {
            if (type === 'port') {
                gold += 15;
            } else {
                gold += 10;
                if (Math.random() < 0.15) {
                    emeralds += 1;
                    tg.HapticFeedback.notificationOccurred('success');
                }
            }
            updateUI();
            tg.HapticFeedback.impactOccurred('medium');
        }

        function updateUI() {
            document.getElementById('gold').innerText = gold;
            document.getElementById('emeralds').innerText = emeralds;
        }

        // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –¢–µ–ª–µ–≥—Ä–∞–º
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name;
        }

        updateUI();
    </script>
</body>
</html>
