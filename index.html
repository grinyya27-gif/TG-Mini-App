<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RPG Clicker</title>

<!-- Telegram WebApp -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
/* ===== RESET ===== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ===== BASE ===== */
body {
  background: #0f0f14;
  color: #ffffff;
  font-family: Arial, sans-serif;
}

.app {
  padding: 16px;
  max-width: 480px;
  margin: 0 auto;
}

/* ===== HEADER ===== */
.header {
  text-align: center;
  margin-bottom: 16px;
}

.header h1 {
  font-size: 24px;
}

/* ===== CURRENCIES ===== */
.currencies {
  display: flex;
  justify-content: space-between;
  background: #1c1c26;
  padding: 12px;
  border-radius: 12px;
  margin-bottom: 12px;
}

.currency {
  font-size: 16px;
}

/* ===== STATS ===== */
.stats {
  background: #1c1c26;
  padding: 12px;
  border-radius: 12px;
  margin-bottom: 12px;
}

.stat {
  margin-bottom: 6px;
}

/* ===== BUTTONS ===== */
button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
}

.btn-work {
  background: #f1c40f;
  color: #000;
}

.btn-upgrade {
  background: #2ecc71;
  color: #000;
}

.btn-emerald {
  background: #1abc9c;
  color: #000;
}

/* ===== SECTIONS ===== */
.section {
  background: #1c1c26;
  padding: 12px;
  border-radius: 12px;
  margin-top: 12px;
}

.section h2 {
  font-size: 18px;
  margin-bottom: 8px;
}

/* ===== PASSIVE ===== */
.passive-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.passive-item span {
  font-size: 14px;
}
</style>
</head>

<body>
<div class="app">

  <div class="header">
    <h1>ğŸ° RPG Clicker</h1>
  </div>

  <!-- Ğ’Ğ°Ğ»ÑÑ‚Ñ‹ -->
  <div class="currencies">
    <div class="currency">ğŸ’° <span id="gold">0</span></div>
    <div class="currency">ğŸ’ <span id="emeralds">0</span></div>
  </div>

  <!-- Ğ¡Ñ‚Ğ°Ñ‚Ñ‹ -->
  <div class="stats">
    <div class="stat">â­ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ: <span id="level">1</span></div>
    <div class="stat">ğŸ“Š ĞĞ¿Ñ‹Ñ‚: <span id="exp">0</span>/<span id="expToNext">100</span></div>
    <div class="stat">âš¡ Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ: <span id="energy">100</span>/<span id="maxEnergy">100</span></div>
  </div>

  <!-- Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° -->
  <button class="btn-work" id="workBtn">ğŸ”¨ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ</button>

  <!-- Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ -->
  <div class="section">
    <h2>ğŸ›’ Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ</h2>

    <button class="btn-upgrade" id="upgradeClick">
      â• Ğ¡Ğ¸Ğ»Ğ° ĞºĞ»Ğ¸ĞºĞ° (+1) â€” ğŸ’° <span id="clickCost">10</span>
    </button>

    <button class="btn-upgrade" id="upgradeEnergy">
      ğŸ”‹ ĞœĞ°ĞºÑ. ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ (+10) â€” ğŸ’° <span id="energyCost">20</span>
    </button>

    <button class="btn-emerald" id="buyEmeraldUpgrade">
      ğŸ’ ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ´Ğ¾Ñ…Ğ¾Ğ´ (+1/ÑĞµĞº) â€” ğŸ’ 3
    </button>
  </div>

  <!-- ĞŸĞ°ÑÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´ -->
  <div class="section">
    <h2>ğŸ­ ĞŸĞ°ÑÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´</h2>

    <div class="passive-item">
      <span>Ğ¨Ğ°Ñ…Ñ‚Ğ° (ÑƒÑ€. <span id="mineLevel">0</span>)</span>
      <button class="btn-upgrade" id="buyMine">
        ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ â€” ğŸ’° <span id="mineCost">50</span>
      </button>
    </div>

    <div class="stat">
      ğŸ’¸ Ğ”Ğ¾Ñ…Ğ¾Ğ´: <span id="passiveIncome">0</span> / ÑĞµĞº
    </div>
  </div>

</div>

<script>
/* ===== TELEGRAM ===== */
const tg = window.Telegram.WebApp;
tg.expand();

/* ===== GAME STATE ===== */
let game = {
  gold: 0,
  emeralds: 0,

  level: 1,
  exp: 0,
  expToNext: 100,

  energy: 100,
  maxEnergy: 100,

  clickPower: 1,

  passiveIncome: 0,

  mineLevel: 0,
  mineCost: 50,

  clickUpgradeCost: 10,
  energyUpgradeCost: 20
};

/* ===== LOAD / SAVE ===== */
function saveGame() {
  localStorage.setItem("rpg_clicker_save", JSON.stringify(game));
}

function loadGame() {
  const save = localStorage.getItem("rpg_clicker_save");
  if (save) {
    game = JSON.parse(save);
  }
}

/* ===== UI ===== */
function updateUI() {
  document.getElementById("gold").textContent = game.gold;
  document.getElementById("emeralds").textContent = game.emeralds;
  document.getElementById("level").textContent = game.level;
  document.getElementById("exp").textContent = game.exp;
  document.getElementById("expToNext").textContent = game.expToNext;
  document.getElementById("energy").textContent = game.energy;
  document.getElementById("maxEnergy").textContent = game.maxEnergy;

  document.getElementById("clickCost").textContent = game.clickUpgradeCost;
  document.getElementById("energyCost").textContent = game.energyUpgradeCost;

  document.getElementById("mineLevel").textContent = game.mineLevel;
  document.getElementById("mineCost").textContent = game.mineCost;
  document.getElementById("passiveIncome").textContent = game.passiveIncome;
}

/* ===== GAME LOGIC ===== */
document.getElementById("workBtn").onclick = () => {
  if (game.energy <= 0) return;

  game.energy--;
  game.gold += game.clickPower;
  game.exp += 5;

  if (game.exp >= game.expToNext) {
    levelUp();
  }

  saveGame();
  updateUI();
};

function levelUp() {
  game.level++;
  game.exp = 0;
  game.expToNext = Math.floor(game.expToNext * 1.5);
  game.emeralds += 1;
  game.maxEnergy += 10;
  game.energy = game.maxEnergy;
}

/* ===== UPGRADES ===== */
document.getElementById("upgradeClick").onclick = () => {
  if (game.gold >= game.clickUpgradeCost) {
    game.gold -= game.clickUpgradeCost;
    game.clickPower++;
    game.clickUpgradeCost = Math.floor(game.clickUpgradeCost * 1.5);
    saveGame();
    updateUI();
  }
};

document.getElementById("upgradeEnergy").onclick = () => {
  if (game.gold >= game.energyUpgradeCost) {
    game.gold -= game.energyUpgradeCost;
    game.maxEnergy += 10;
    game.energy = game.maxEnergy;
    game.energyUpgradeCost = Math.floor(game.energyUpgradeCost * 1.5);
    saveGame();
    updateUI();
  }
};

document.getElementById("buyEmeraldUpgrade").onclick = () => {
  if (game.emeralds >= 3) {
    game.emeralds -= 3;
    game.passiveIncome += 1;
    saveGame();
    updateUI();
  }
};

/* ===== PASSIVE ===== */
document.getElementById("buyMine").onclick = () => {
  if (game.gold >= game.mineCost) {
    game.gold -= game.mineCost;
    game.mineLevel++;
    game.passiveIncome += 1;
    game.mineCost = Math.floor(game.mineCost * 1.7);
    saveGame();
    updateUI();
  }
};

setInterval(() => {
  game.gold += game.passiveIncome;
  saveGame();
  updateUI();
}, 1000);

/* ===== INIT ===== */
loadGame();
updateUI();
</script>

</body>
</html>
