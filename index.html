<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Blue Game Hub</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(160deg,#0f172a,#020617);
  color:white;
}
.screen{display:none;padding:20px;}
.show{display:block;}
.card{
  background:rgba(255,255,255,.08);
  border-radius:20px;
  padding:20px;
  margin:15px 0;
}
input,button{
  width:100%;
  padding:14px;
  margin:8px 0;
  border-radius:14px;
  border:none;
  font-size:16px;
}
button{
  background:linear-gradient(135deg,#2ea6ff,#2563eb);
  color:white;
}
.small{opacity:.7;font-size:14px;}
</style>
</head>

<body>

<!-- –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø -->
<div id="auth" class="screen show">
  <h1>üîê –í—Ö–æ–¥</h1>
  <div class="card">
    <input id="login" placeholder="–õ–æ–≥–∏–Ω">
    <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="login()">–í–æ–π—Ç–∏</button>
    <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
  </div>
</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="screen">
  <h1>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h1>
  <div class="card">
    <b id="userLogin"></b><br>
    üí∞ –ú–æ–Ω–µ—Ç—ã: <b id="coins"></b><br>
    ‚≠ê –£—Ä–æ–≤–µ–Ω—å: <b id="level"></b>
  </div>

  <div class="card">
    <button onclick="daily()">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞</button>
    <p class="small" id="dailyInfo"></p>
  </div>

  <div class="card">
    <button onclick="upgrade()">‚¨Ü –ü—Ä–æ–∫–∞—á–∫–∞ (100 –º–æ–Ω–µ—Ç)</button>
  </div>

  <button onclick="openGames()">üéÆ –ò–≥—Ä—ã</button>
</div>

<!-- –ò–ì–†–ê -->
<div id="game" class="screen">
  <h2>‚ö° –ö–ª–∏–∫–µ—Ä</h2>
  <p>–û—á–∫–∏: <span id="score">0</span></p>
  <button onclick="hit()">–ñ–ú–ò</button>
  <button onclick="finish()">–ó–∞–∫–æ–Ω—á–∏—Ç—å</button>
</div>

<script>
Telegram.WebApp.ready();

/* ---------- –î–ê–ù–ù–´–ï ---------- */
let users = JSON.parse(localStorage.getItem("users")||"{}");
let current = JSON.parse(localStorage.getItem("currentUser")||"null");

/* ---------- –ê–í–¢–û–í–•–û–î ---------- */
if(current){ loadProfile(); }

/* ---------- –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ---------- */
function register(){
  let l=login.value,p=password.value;
  if(users[l]) return alert("–õ–æ–≥–∏–Ω –∑–∞–Ω—è—Ç");
  users[l]={password:p,coins:0,level:1,lastDaily:0};
  localStorage.setItem("users",JSON.stringify(users));
  alert("–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω");
}
function login(){
  let l=login.value,p=password.value;
  if(!users[l]||users[l].password!==p) return alert("–û—à–∏–±–∫–∞");
  current=l;
  localStorage.setItem("currentUser",JSON.stringify(l));
  loadProfile();
}

/* ---------- –ü–†–û–§–ò–õ–¨ ---------- */
function loadProfile(){
  show("profile");
  userLogin.innerText=current;
  update();
}
function update(){
  coins.innerText=users[current].coins;
  level.innerText=users[current].level;
}

/* ---------- –ï–ñ–ï–î–ù–ï–í–ù–ê–Ø –ù–ê–ì–†–ê–î–ê ---------- */
function daily(){
  let u=users[current];
  let now=Date.now();
  if(now-u.lastDaily<86400000){
    dailyInfo.innerText="‚è≥ –£–∂–µ –ø–æ–ª—É—á–µ–Ω–æ";
    return;
  }
  let reward=50*u.level;
  u.coins+=reward;
  u.lastDaily=now;
  save();
  dailyInfo.innerText="üéâ –ü–æ–ª—É—á–µ–Ω–æ "+reward;
}

/* ---------- –ü–†–û–ö–ê–ß–ö–ê ---------- */
function upgrade(){
  let u=users[current];
  if(u.coins<100) return alert("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç");
  u.coins-=100;
  u.level++;
  save();
}

/* ---------- –ò–ì–†–ê ---------- */
let score=0;
function openGames(){ show("game"); score=0; scoreEl(); }
function hit(){ score++; scoreEl(); }
function scoreEl(){ scoreSpan.innerText=score; }
function finish(){
  let gain=score*users[current].level;
  users[current].coins+=gain;
  alert("üí∞ +"+gain);
  save();
  loadProfile();
}

/* ---------- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–û–ï ---------- */
function save(){
  localStorage.setItem("users",JSON.stringify(users));
  update();
}
function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("show"));
  document.getElementById(id).classList.add("show");
}
</script>

</body>
</html>
