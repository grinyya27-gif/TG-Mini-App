import React, { useState, useEffect } from 'react';
import { User, Briefcase, ShoppingBag, Building2, Package, Trophy, Coins, Heart, Zap, Award } from 'lucide-react';

const TelegramRPG = () => {
  const [currentPage, setCurrentPage] = useState('profile');
  const [player, setPlayer] = useState({
    name: '–ò–≥—Ä–æ–∫',
    level: 1,
    experience: 0,
    experienceToNext: 100,
    health: 100,
    maxHealth: 100,
    energy: 100,
    maxEnergy: 100,
    money: 1000,
    bankMoney: 0,
    strength: 5,
    intelligence: 5,
    luck: 5,
    currentJob: null,
    workProgress: 0
  });

  const [inventory, setInventory] = useState([
    { id: 1, name: '–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –º–µ—á', type: 'weapon', power: 5, price: 50, equipped: false },
    { id: 2, name: '–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è', type: 'potion', healing: 30, price: 20, count: 3 }
  ]);

  const [market] = useState([
    { id: 101, name: '–ñ–µ–ª–µ–∑–Ω—ã–π –º–µ—á', type: 'weapon', power: 15, price: 300 },
    { id: 102, name: '–°—Ç–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è', type: 'armor', defense: 10, price: 500 },
    { id: 103, name: '–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è', type: 'potion', healing: 30, price: 25 },
    { id: 104, name: '–ó–µ–ª—å–µ —ç–Ω–µ—Ä–≥–∏–∏', type: 'potion', energy: 40, price: 30 },
    { id: 105, name: '–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∞–º—É–ª–µ—Ç', type: 'accessory', luck: 3, price: 400 },
    { id: 106, name: '–ö–Ω–∏–≥–∞ –∑–Ω–∞–Ω–∏–π', type: 'book', intelligence: 2, price: 200 },
    { id: 107, name: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –º–µ—á', type: 'weapon', power: 30, price: 1500 },
    { id: 108, name: '–≠–ª–∏–∫—Å–∏—Ä —Å–∏–ª—ã', type: 'potion', strength: 5, price: 500 }
  ]);

  const [jobs] = useState([
    { id: 1, name: '–ö—É—Ä—å–µ—Ä', pay: 50, energyCost: 10, duration: 3000, minLevel: 1 },
    { id: 2, name: '–û—Ö—Ä–∞–Ω–Ω–∏–∫', pay: 100, energyCost: 20, duration: 5000, minLevel: 3 },
    { id: 3, name: '–¢–æ—Ä–≥–æ–≤–µ—Ü', pay: 200, energyCost: 15, duration: 4000, minLevel: 5 },
    { id: 4, name: '–ö—É–∑–Ω–µ—Ü', pay: 300, energyCost: 30, duration: 6000, minLevel: 8 },
    { id: 5, name: '–ú–∞–≥', pay: 500, energyCost: 25, duration: 7000, minLevel: 10 },
    { id: 6, name: '–†—ã—Ü–∞—Ä—å', pay: 700, energyCost: 40, duration: 8000, minLevel: 15 }
  ]);

  const [quests] = useState([
    { id: 1, name: '–ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π 500 –º–æ–Ω–µ—Ç', reward: 100, type: 'money', target: 500, completed: false },
    { id: 2, name: '–ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è', description: '–î–æ—Å—Ç–∏–≥–Ω–∏ 3 —É—Ä–æ–≤–Ω—è', reward: 200, type: 'level', target: 3, completed: false },
    { id: 3, name: '–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä', description: '–°–æ–±–µ—Ä–∏ 5 –ø—Ä–µ–¥–º–µ—Ç–æ–≤', reward: 150, type: 'items', target: 5, completed: false }
  ]);

  const [achievements, setAchievements] = useState([
    { id: 1, name: '–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏', description: '–î–æ—Å—Ç–∏–≥–Ω–∏ 2 —É—Ä–æ–≤–Ω—è', unlocked: false },
    { id: 2, name: '–ë–æ–≥–∞—á', description: '–ù–∞–∫–æ–ø–∏ 5000 –º–æ–Ω–µ—Ç', unlocked: false },
    { id: 3, name: '–¢—Ä—É–¥–æ–≥–æ–ª–∏–∫', description: '–í—ã–ø–æ–ª–Ω–∏ 10 —Ä–∞–±–æ—Ç', unlocked: false },
    { id: 4, name: '–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä', description: '–°–æ–±–µ—Ä–∏ 10 –ø—Ä–µ–¥–º–µ—Ç–æ–≤', unlocked: false }
  ]);

  const [workCount, setWorkCount] = useState(0);
  const [notifications, setNotifications] = useState([]);

  useEffect(() => {
    const interval = setInterval(() => {
      setPlayer(prev => ({
        ...prev,
        energy: Math.min(prev.energy + 1, prev.maxEnergy)
      }));
    }, 10000);

    return () => clearInterval(interval);
  }, []);

  const addNotification = (message, type = 'info') => {
    const notification = { id: Date.now(), message, type };
    setNotifications(prev => [...prev, notification]);
    setTimeout(() => {
      setNotifications(prev => prev.filter(n => n.id !== notification.id));
    }, 3000);
  };

  const gainExperience = (amount) => {
    setPlayer(prev => {
      let newExp = prev.experience + amount;
      let newLevel = prev.level;
      let expNeeded = prev.experienceToNext;

      while (newExp >= expNeeded) {
        newExp -= expNeeded;
        newLevel++;
        expNeeded = Math.floor(expNeeded * 1.5);
        addNotification(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ ${newLevel} —É—Ä–æ–≤–Ω—è!`, 'success');
      }

      return {
        ...prev,
        experience: newExp,
        level: newLevel,
        experienceToNext: expNeeded,
        maxHealth: prev.maxHealth + (newLevel - prev.level) * 10,
        maxEnergy: prev.maxEnergy + (newLevel - prev.level) * 5
      };
    });
  };

  const startWork = (job) => {
    if (player.energy < job.energyCost) {
      addNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 'error');
      return;
    }

    if (player.level < job.minLevel) {
      addNotification(`–¢—Ä–µ–±—É–µ—Ç—Å—è ${job.minLevel} —É—Ä–æ–≤–µ–Ω—å!`, 'error');
      return;
    }

    setPlayer(prev => ({
      ...prev,
      currentJob: job,
      workProgress: 0,
      energy: prev.energy - job.energyCost
    }));

    const progressInterval = setInterval(() => {
      setPlayer(prev => {
        if (prev.workProgress >= 100) {
          clearInterval(progressInterval);
          const bonus = Math.floor(Math.random() * 20) - 10;
          const finalPay = job.pay + bonus;
          addNotification(`–†–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ü–æ–ª—É—á–µ–Ω–æ: ${finalPay} –º–æ–Ω–µ—Ç`, 'success');
          gainExperience(20);
          setWorkCount(c => c + 1);
          return {
            ...prev,
            currentJob: null,
            workProgress: 0,
            money: prev.money + finalPay
          };
        }
        return {
          ...prev,
          workProgress: prev.workProgress + (100 / (job.duration / 100))
        };
      });
    }, 100);
  };

  const buyItem = (item) => {
    if (player.money < item.price) {
      addNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!', 'error');
      return;
    }

    const existingItem = inventory.find(i => i.id === item.id);
    if (existingItem && item.type === 'potion') {
      setInventory(prev => prev.map(i => 
        i.id === item.id ? { ...i, count: (i.count || 1) + 1 } : i
      ));
    } else {
      setInventory(prev => [...prev, { ...item, count: 1 }]);
    }

    setPlayer(prev => ({ ...prev, money: prev.money - item.price }));
    addNotification(`–ö—É–ø–ª–µ–Ω–æ: ${item.name}`, 'success');
  };

  const sellItem = (item) => {
    const sellPrice = Math.floor(item.price * 0.6);
    
    if (item.count && item.count > 1) {
      setInventory(prev => prev.map(i => 
        i.id === item.id ? { ...i, count: i.count - 1 } : i
      ));
    } else {
      setInventory(prev => prev.filter(i => i.id !== item.id));
    }

    setPlayer(prev => ({ ...prev, money: prev.money + sellPrice }));
    addNotification(`–ü—Ä–æ–¥–∞–Ω–æ: ${item.name} –∑–∞ ${sellPrice} –º–æ–Ω–µ—Ç`, 'success');
  };

  const useItem = (item) => {
    if (item.type === 'potion') {
      if (item.healing) {
        setPlayer(prev => ({
          ...prev,
          health: Math.min(prev.health + item.healing, prev.maxHealth)
        }));
        addNotification(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${item.healing} HP`, 'success');
      }
      if (item.energy) {
        setPlayer(prev => ({
          ...prev,
          energy: Math.min(prev.energy + item.energy, prev.maxEnergy)
        }));
        addNotification(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${item.energy} —ç–Ω–µ—Ä–≥–∏–∏`, 'success');
      }

      if (item.count > 1) {
        setInventory(prev => prev.map(i => 
          i.id === item.id ? { ...i, count: i.count - 1 } : i
        ));
      } else {
        setInventory(prev => prev.filter(i => i.id !== item.id));
      }
    }
  };

  const depositMoney = (amount) => {
    if (player.money < amount) {
      addNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!', 'error');
      return;
    }
    setPlayer(prev => ({
      ...prev,
      money: prev.money - amount,
      bankMoney: prev.bankMoney + amount
    }));
    addNotification(`–í–Ω–µ—Å–µ–Ω–æ –≤ –±–∞–Ω–∫: ${amount} –º–æ–Ω–µ—Ç`, 'success');
  };

  const withdrawMoney = (amount) => {
    if (player.bankMoney < amount) {
      addNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –≤ –±–∞–Ω–∫–µ!', 'error');
      return;
    }
    setPlayer(prev => ({
      ...prev,
      money: prev.money + amount,
      bankMoney: prev.bankMoney - amount
    }));
    addNotification(`–°–Ω—è—Ç–æ –∏–∑ –±–∞–Ω–∫–∞: ${amount} –º–æ–Ω–µ—Ç`, 'success');
  };

  const ProfilePage = () => (
    <div className="space-y-4">
      <div className="bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-6 text-white">
        <div className="flex items-center justify-between mb-4">
          <div>
            <h2 className="text-2xl font-bold">{player.name}</h2>
            <div className="flex items-center gap-2 mt-1">
              <Award className="w-4 h-4" />
              <span>–£—Ä–æ–≤–µ–Ω—å {player.level}</span>
            </div>
          </div>
          <div className="text-right">
            <div className="text-2xl font-bold">{player.money} üí∞</div>
            <div className="text-sm opacity-80">–ë–∞–Ω–∫: {player.bankMoney} üí∞</div>
          </div>
        </div>

        <div className="space-y-2">
          <div>
            <div className="flex justify-between text-sm mb-1">
              <span>–û–ø—ã—Ç</span>
              <span>{player.experience} / {player.experienceToNext}</span>
            </div>
            <div className="w-full bg-purple-900 rounded-full h-2">
              <div 
                className="bg-yellow-400 h-2 rounded-full transition-all"
                style={{ width: `${(player.experience / player.experienceToNext) * 100}%` }}
              />
            </div>
          </div>

          <div>
            <div className="flex justify-between text-sm mb-1">
              <span>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</span>
              <span>{player.health} / {player.maxHealth}</span>
            </div>
            <div className="w-full bg-red-900 rounded-full h-2">
              <div 
                className="bg-red-400 h-2 rounded-full"
                style={{ width: `${(player.health / player.maxHealth) * 100}%` }}
              />
            </div>
          </div>

          <div>
            <div className="flex justify-between text-sm mb-1">
              <span>‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
              <span>{player.energy} / {player.maxEnergy}</span>
            </div>
            <div className="w-full bg-blue-900 rounded-full h-2">
              <div 
                className="bg-blue-400 h-2 rounded-full"
                style={{ width: `${(player.energy / player.maxEnergy) * 100}%` }}
              />
            </div>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-3 gap-4">
        <div className="bg-white rounded-lg p-4 text-center shadow">
          <div className="text-3xl font-bold text-red-600">{player.strength}</div>
          <div className="text-sm text-gray-600">–°–∏–ª–∞</div>
        </div>
        <div className="bg-white rounded-lg p-4 text-center shadow">
          <div className="text-3xl font-bold text-blue-600">{player.intelligence}</div>
          <div className="text-sm text-gray-600">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</div>
        </div>
        <div className="bg-white rounded-lg p-4 text-center shadow">
          <div className="text-3xl font-bold text-green-600">{player.luck}</div>
          <div className="text-sm text-gray-600">–£–¥–∞—á–∞</div>
        </div>
      </div>

      <div className="bg-white rounded-lg p-4 shadow">
        <h3 className="font-bold text-lg mb-3">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
        <div className="space-y-2">
          {achievements.map(achievement => (
            <div 
              key={achievement.id}
              className={`p-3 rounded-lg ${achievement.unlocked ? 'bg-yellow-100' : 'bg-gray-100'}`}
            >
              <div className="font-semibold">{achievement.name}</div>
              <div className="text-sm text-gray-600">{achievement.description}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );

  const WorkPage = () => (
    <div className="space-y-4">
      <div className="bg-white rounded-lg p-4 shadow">
        <h2 className="text-xl font-bold mb-4">üíº –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</h2>
        
        {player.currentJob && (
          <div className="mb-4 p-4 bg-blue-50 rounded-lg">
            <div className="flex justify-between items-center mb-2">
              <span className="font-semibold">–†–∞–±–æ—Ç–∞—é: {player.currentJob.name}</span>
              <span>{Math.floor(player.workProgress)}%</span>
            </div>
            <div className="w-full bg-gray-300 rounded-full h-3">
              <div 
                className="bg-blue-600 h-3 rounded-full transition-all"
                style={{ width: `${player.workProgress}%` }}
              />
            </div>
          </div>
        )}

        <div className="space-y-3">
          {jobs.map(job => (
            <div key={job.id} className="border rounded-lg p-4">
              <div className="flex justify-between items-start mb-2">
                <div>
                  <h3 className="font-bold text-lg">{job.name}</h3>
                  <div className="text-sm text-gray-600">
                    –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å: {job.minLevel}
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-green-600 font-bold">{job.pay} üí∞</div>
                  <div className="text-sm text-red-600">-{job.energyCost} ‚ö°</div>
                </div>
              </div>
              <button
                onClick={() => startWork(job)}
                disabled={player.currentJob || player.energy < job.energyCost || player.level < job.minLevel}
                className="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-blue-700 transition"
              >
                {player.level < job.minLevel ? '–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å' : 
                 player.energy < job.energyCost ? '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏' : 
                 player.currentJob ? '–ó–∞–Ω—è—Ç —Ä–∞–±–æ—Ç–æ–π' : '–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É'}
              </button>
            </div>
          ))}
        </div>
      </div>

      <div className="bg-white rounded-lg p-4 shadow">
        <h3 className="font-bold text-lg mb-3">üìã –ó–∞–¥–∞–Ω–∏—è</h3>
        <div className="space-y-2">
          {quests.map(quest => (
            <div key={quest.id} className="p-3 border rounded-lg">
              <div className="font-semibold">{quest.name}</div>
              <div className="text-sm text-gray-600">{quest.description}</div>
              <div className="text-sm text-green-600 mt-1">–ù–∞–≥—Ä–∞–¥–∞: {quest.reward} üí∞</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );

  const InventoryPage = () => (
    <div className="space-y-4">
      <div className="bg-white rounded-lg p-4 shadow">
        <h2 className="text-xl font-bold mb-4">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
        {inventory.length === 0 ? (
          <p className="text-gray-500 text-center py-8">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p>
        ) : (
          <div className="grid grid-cols-1 gap-3">
            {inventory.map(item => (
              <div key={item.id} className="border rounded-lg p-4">
                <div className="flex justify-between items-start mb-2">
                  <div>
                    <h3 className="font-bold">{item.name}</h3>
                    {item.count && <span className="text-sm text-gray-600">x{item.count}</span>}
                    <div className="text-sm text-gray-600 mt-1">
                      {item.type === 'weapon' && `‚öîÔ∏è –£—Ä–æ–Ω: ${item.power}`}
                      {item.type === 'armor' && `üõ°Ô∏è –ó–∞—â–∏—Ç–∞: ${item.defense}`}
                      {item.type === 'potion' && item.healing && `‚ù§Ô∏è +${item.healing} HP`}
                      {item.type === 'potion' && item.energy && `‚ö° +${item.energy} —ç–Ω–µ—Ä–≥–∏–∏`}
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="text-green-600 font-semibold">{Math.floor(item.price * 0.6)} üí∞</div>
                  </div>
                </div>
                <div className="flex gap-2">
                  {item.type === 'potion' && (
                    <button
                      onClick={() => useItem(item)}
                      className="flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition"
                    >
                      –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
                    </button>
                  )}
                  <button
                    onClick={() => sellItem(item)}
                    className="flex-1 bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition"
                  >
                    –ü—Ä–æ–¥–∞—Ç—å
                  </button>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );

  const MarketPage = () => (
    <div className="space-y-4">
      <div className="bg-white rounded-lg p-4 shadow">
        <h2 className="text-xl font-bold mb-4">üè™ –†—ã–Ω–æ–∫</h2>
        <div className="mb-4 p-3 bg-gray-100 rounded-lg">
          <div className="text-center">
            <span className="text-lg font-bold">–í–∞—à–∏ –¥–µ–Ω—å–≥–∏: {player.money} üí∞</span>
          </div>
        </div>
        <div className="grid grid-cols-1 gap-3">
          {market.map(item => (
            <div key={item.id} className="border rounded-lg p-4">
              <div className="flex justify-between items-start mb-3">
                <div>
                  <h3 className="font-bold">{item.name}</h3>
                  <div className="text-sm text-gray-600 mt-1">
                    {item.type === 'weapon' && `‚öîÔ∏è –£—Ä–æ–Ω: ${item.power}`}
                    {item.type === 'armor' && `üõ°Ô∏è –ó–∞—â–∏—Ç–∞: ${item.defense}`}
                    {item.type === 'potion' && item.healing && `‚ù§Ô∏è +${item.healing} HP`}
                    {item.type === 'potion' && item.energy && `‚ö° +${item.energy} —ç–Ω–µ—Ä–≥–∏–∏`}
                    {item.type === 'accessory' && `üçÄ –£–¥–∞—á–∞: +${item.luck}`}
                    {item.type === 'book' && `üìö –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: +${item.intelligence}`}
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-yellow-600 font-bold text-lg">{item.price} üí∞</div>
                </div>
              </div>
              <button
                onClick={() => buyItem(item)}
                disabled={player.money < item.price}
                className="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-blue-700 transition"
              >
                {player.money < item.price ? '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥' : '–ö—É–ø–∏—Ç—å'}
              </button>
            </div>
          ))}
        </div>
      </div>
    </div>
  );

  const BankPage = () => {
    const [depositAmount, setDepositAmount] = useState('');
    const [withdrawAmount, setWithdrawAmount] = useState('');

    return (
      <div className="space-y-4">
        <div className="bg-white rounded-lg p-4 shadow">
          <h2 className="text-xl font-bold mb-4">üè¶ –ë–∞–Ω–∫</h2>
          
          <div className="grid grid-cols-2 gap-4 mb-6">
            <div className="bg-green-50 rounded-lg p-4 text-center">
              <div className="text-sm text-gray-600 mb-1">–ù–∞ —Ä—É–∫–∞—Ö</div>
              <div className="text-2xl font-bold text-green-600">{player.money} üí∞</div>
            </div>
            <div className="bg-blue-50 rounded-lg p-4 text-center">
              <div className="text-sm text-gray-600 mb-1">–í –±–∞–Ω–∫–µ</div>
              <div className="text-2xl font-bold text-blue-600">{player.bankMoney} üí∞</div>
            </div>
          </div>

          <div className="space-y-4">
            <div className="border rounded-lg p-4">
              <h3 className="font-bold mb-3">üíµ –í–Ω–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏</h3>
              <input
                type="number"
                value={depositAmount}
                onChange={(e) => setDepositAmount(e.target.value)}
                placeholder="–°—É–º–º–∞"
                className="w-full border rounded-lg p-2 mb-3"
              />
              <div className="flex gap-2 mb-3">
                <button
                  onClick={() => setDepositAmount('100')}
                  className="flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300"
                >
                  100
                </button>
                <button
                  onClick={() => setDepositAmount('500')}
                  className="flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300"
                >
                  500
                </button>
                <button
                  onClick={() => setDepositAmount(player.money.toString())}
                  className="flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300"
                >
                  –í—Å—ë
                </button>
              </div>
              <button
                onClick={() => {
                  const amount = parseInt(depositAmount);
                  if (amount > 0) {
                    depositMoney(amount);
                    setDepositAmount('');
                  }
                }}
                className="w-full bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700"
              >
                –í–Ω–µ—Å—Ç–∏
              </button>
            </div>

            <div className="border rounded-lg p-4">
              <h3 className="font-bold mb-3">üí∏ –°–Ω—è—Ç—å –¥–µ–Ω—å–≥–∏</h3>
              <input
                type="number"
                value={withdrawAmount}
                onChange={(e) => setWithdrawAmount(e.target.value)}
                placeholder="–°—É–º–º–∞"
                className="w-full border rounded-lg p-2 mb-3"
              />
              <div className="flex gap-2 mb-3">
                <button
                  onClick={() => setWithdrawAmount('100')}
                  className="flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300"
                >
                  100
                </button>
                <button
                  onClick={() => setWithdrawAmount('500')}
                  className="flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300"
                >
                  500
                </button>
                <button
                  onClick={() => setWithdrawAmount(player.bankMoney.toString())}
                  className="flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300"
                >
                  –í—Å—ë
                </button>
              </div>
              <button
                onClick={() => {
                  const amount = parseInt(withdrawAmount);
                  if (amount > 0) {
                    withdrawMoney(amount);
                    setWithdrawAmount('');
                  }
                }}
                className="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700"
              >
                –°–Ω—è—Ç—å
              </button>
            </div>
          </div>

          <div className="mt-6 p-4 bg-yellow-50 rounded-lg">
            <h3 className="font-bold mb-2">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <ul className="text-sm text-gray-700 space-y-1">
              <li>‚Ä¢ –î–µ–Ω—å–≥–∏ –≤ –±–∞–Ω–∫–µ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –∫—Ä–∞–∂–∏</li>
              <li>‚Ä¢ –ù–∞–∫–æ–ø–∏—Ç–µ –¥–µ–Ω—å–≥–∏ –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫</li>
              <li>‚Ä¢ –û–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ</li>
            </ul>
          </div>
        </div>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-100 to-gray-200">
      {notifications.length > 0 && (
        <div className="fixed top-4 right-4 z-50 space-y-2">
          {notifications.map(notif => (
            <div
              key={notif.id}
              className={`px-4 py-3 rounded-lg shadow-lg text-white ${
                notif.type === 'success' ? 'bg-green-500' :
                notif.type === 'error' ? 'bg-red-500' :
                'bg-blue-500'
              }`}
            >
              {notif.message}
            </div>
          ))}
        </div>
      )}

      <div className="max-w-2xl mx-auto pb-20">
        <div className="p-4">
          {currentPage === 'profile' && <ProfilePage />}
          {currentPage === 'work' && <WorkPage />}
          {currentPage === 'inventory' && <InventoryPage />}
          {currentPage === 'market' && <MarketPage />}
          {currentPage === 'bank' && <BankPage />}
        </div>
      </div>

      <div className="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg">
        <div className="max-w-2xl mx-auto flex">
          <button
            onClick={() => setCurrentPage('profile')}
            className={`flex-1 py-3 flex flex-col items-center gap-1 ${
              currentPage === 'profile' ? 'text-blue-600' : 'text-gray-600'
            }`}
          >
            <User size={24} />
            <span className="text-xs">–ü—Ä–æ—Ñ–∏–ª—å</span>
          </button>
          <button
            onClick={() => setCurrentPage('work')}
            className={`flex-1 py-3 flex flex-col items-center gap-1 ${
              currentPage === 'work' ? 'text-blue-600' : 'text-gray-600'
            }`}
