<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤–∞—è –ñ–∏–∑–Ω—å RPG</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e0e0e0;
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            padding: 15px;
            border-bottom: 3px solid #c41e3a;
            box-shadow: 0 4px 15px rgba(196, 30, 58, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #c41e3a;
            background: #3a3a3a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #c41e3a;
        }

        .avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-info {
            flex: 1;
        }

        .username {
            font-size: 18px;
            font-weight: bold;
            color: #c41e3a;
            margin-bottom: 5px;
        }

        .level {
            font-size: 14px;
            color: #b0b0b0;
        }

        .resources {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .resource {
            background: rgba(196, 30, 58, 0.1);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #c41e3a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .resource-name {
            font-size: 12px;
            color: #b0b0b0;
        }

        .resource-value {
            font-size: 16px;
            font-weight: bold;
            color: #c41e3a;
        }

        .navigation {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            padding: 10px;
            background: #1f1f1f;
            border-bottom: 2px solid #c41e3a;
        }

        .nav-btn {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            color: #e0e0e0;
            padding: 12px 5px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s;
            text-align: center;
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(196, 30, 58, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
            box-shadow: 0 4px 12px rgba(196, 30, 58, 0.6);
        }

        .content {
            padding: 15px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .job-grid {
            display: grid;
            gap: 15px;
        }

        .job-card {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .job-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(196, 30, 58, 0.2), transparent);
            transition: left 0.5s;
        }

        .job-card:hover::before {
            left: 100%;
        }

        .job-card:active {
            transform: scale(0.98);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .job-title {
            font-size: 18px;
            font-weight: bold;
            color: #c41e3a;
        }

        .job-level {
            background: rgba(196, 30, 58, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            border: 1px solid #c41e3a;
        }

        .job-info {
            margin-bottom: 15px;
            color: #b0b0b0;
            font-size: 14px;
        }

        .job-rewards {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .reward {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .reward-icon {
            color: #c41e3a;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #1a1a1a;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c41e3a 0%, #ff4d6d 100%);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .work-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .work-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(196, 30, 58, 0.4);
        }

        .work-btn:disabled {
            background: #3a3a3a;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .item-card {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(196, 30, 58, 0.3);
        }

        .item-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .item-name {
            font-size: 13px;
            font-weight: bold;
            color: #c41e3a;
            margin-bottom: 5px;
        }

        .item-count {
            font-size: 18px;
            font-weight: bold;
            color: #e0e0e0;
        }

        .market-item {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .market-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .market-item-icon {
            font-size: 32px;
        }

        .market-item-details h3 {
            color: #c41e3a;
            margin-bottom: 5px;
        }

        .market-item-price {
            color: #b0b0b0;
            font-size: 14px;
        }

        .buy-btn, .sell-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .buy-btn:hover, .sell-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(196, 30, 58, 0.4);
        }

        .quest-card {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .quest-title {
            font-size: 18px;
            font-weight: bold;
            color: #c41e3a;
            margin-bottom: 10px;
        }

        .quest-description {
            color: #b0b0b0;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .quest-progress {
            margin-bottom: 10px;
        }

        .quest-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #b0b0b0;
        }

        .bank-section {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .bank-balance {
            text-align: center;
            margin-bottom: 20px;
        }

        .bank-balance h2 {
            color: #c41e3a;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .bank-balance .amount {
            font-size: 36px;
            font-weight: bold;
            color: #e0e0e0;
        }

        .bank-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .bank-input {
            width: 100%;
            padding: 12px;
            background: #1a1a1a;
            border: 2px solid #c41e3a;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .achievement-card {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .achievement-card.completed {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #1a3a1a 0%, #1f1f1f 100%);
        }

        .achievement-icon {
            font-size: 40px;
            opacity: 0.5;
        }

        .achievement-card.completed .achievement-icon {
            opacity: 1;
        }

        .achievement-info h3 {
            color: #c41e3a;
            margin-bottom: 5px;
        }

        .achievement-card.completed .achievement-info h3 {
            color: #4CAF50;
        }

        .achievement-description {
            color: #b0b0b0;
            font-size: 13px;
        }

        .leaderboard-item {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .rank {
            font-size: 24px;
            font-weight: bold;
            color: #c41e3a;
            min-width: 40px;
            text-align: center;
        }

        .rank.top1 { color: #FFD700; }
        .rank.top2 { color: #C0C0C0; }
        .rank.top3 { color: #CD7F32; }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .player-stats {
            font-size: 13px;
            color: #b0b0b0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
            border: 2px solid #c41e3a;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .stat-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 12px;
            color: #b0b0b0;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #c41e3a;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #c41e3a 0%, #a01830 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(196, 30, 58, 0.5);
            animation: slideIn 0.3s, slideOut 0.3s 2.7s;
            z-index: 1000;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }

        .floating-text {
            position: fixed;
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
            pointer-events: none;
            animation: floatUp 1s ease-out;
            z-index: 999;
        }

        @keyframes floatUp {
            from { transform: translateY(0); opacity: 1; }
            to { transform: translateY(-100px); opacity: 0; }
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            color: #c41e3a;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #c41e3a;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #b0b0b0;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        @media (max-width: 400px) {
            .navigation {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .inventory-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="profile-header">
                <div class="avatar" id="avatar">üë§</div>
                <div class="user-info">
                    <div class="username" id="username">–ò–≥—Ä–æ–∫</div>
                    <div class="level">–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span> | –û–ø—ã—Ç: <span id="exp">0</span>/100</div>
                </div>
            </div>
            <div class="resources">
                <div class="resource">
                    <span class="resource-name">üí∞ –ó–æ–ª–æ—Ç–æ</span>
                    <span class="resource-value" id="gold">100</span>
                </div>
                <div class="resource">
                    <span class="resource-name">üíé –î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏</span>
                    <span class="resource-value" id="gems">0</span>
                </div>
                <div class="resource">
                    <span class="resource-name">‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
                    <span class="resource-value" id="energy">100</span>
                </div>
                <div class="resource">
                    <span class="resource-name">üèÜ –†–µ–π—Ç–∏–Ω–≥</span>
                    <span class="resource-value" id="rating">0</span>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showSection('work')">‚öíÔ∏è –†–∞–±–æ—Ç–∞</button>
            <button class="nav-btn" onclick="showSection('inventory')">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
            <button class="nav-btn" onclick="showSection('market')">üè™ –†—ã–Ω–æ–∫</button>
            <button class="nav-btn" onclick="showSection('quests')">üìú –ö–≤–µ—Å—Ç—ã</button>
            <button class="nav-btn" onclick="showSection('bank')">üè¶ –ë–∞–Ω–∫</button>
            <button class="nav-btn" onclick="showSection('achievements')">üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
            <button class="nav-btn" onclick="showSection('leaderboard')">üëë –†–µ–π—Ç–∏–Ω–≥</button>
            <button class="nav-btn" onclick="showSection('profile')">üìä –ü—Ä–æ—Ñ–∏–ª—å</button>
        </div>

        <div class="content">
            <div id="work-section" class="section active">
                <h2 class="section-title">‚öíÔ∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</h2>
                <div class="job-grid" id="jobs-container"></div>
            </div>

            <div id="inventory-section" class="section">
                <h2 class="section-title">üéí –í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                <div class="inventory-grid" id="inventory-container"></div>
            </div>

            <div id="market-section" class="section">
                <h2 class="section-title">üè™ –†—ã–Ω–æ–∫</h2>
                <div id="market-container"></div>
            </div>

            <div id="quests-section" class="section">
                <h2 class="section-title">üìú –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h2>
                <div id="quests-container"></div>
            </div>

            <div id="bank-section" class="section">
                <h2 class="section-title">üè¶ –ë–∞–Ω–∫</h2>
                <div class="bank-section">
                    <div class="bank-balance">
                        <h2>–ë–∞–ª–∞–Ω—Å –≤ –±–∞–Ω–∫–µ</h2>
                        <div class="amount" id="bank-balance">0</div>
                        <div style="color: #b0b0b0; margin-top: 10px;">–ü—Ä–æ—Ü–µ–Ω—Ç: 5% –≤ –¥–µ–Ω—å</div>
                    </div>
                    <input type="number" class="bank-input" id="bank-amount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
                    <div class="bank-actions">
                        <button class="buy-btn" onclick="depositBank()">–í–Ω–µ—Å—Ç–∏</button>
                        <button class="sell-btn" onclick="withdrawBank()">–°–Ω—è—Ç—å</button>
                    </div>
                </div>
            </div>

            <div id="achievements-section" class="section">
                <h2 class="section-title">üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div id="achievements-container"></div>
            </div>

            <div id="leaderboard-section" class="section">
                <h2 class="section-title">üëë –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
                <div id="leaderboard-container"></div>
            </div>

            <div id="profile-section" class="section">
                <h2 class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-grid" id="stats-container"></div>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let gameData = {
            username: '–ò–≥—Ä–æ–∫',
            avatar: null,
            level: 1,
            exp: 0,
            gold: 100,
            gems: 0,
            energy: 100,
            maxEnergy: 100,
            bankBalance: 0,
            rating: 0,
            inventory: {},
            jobLevels: {},
            completedQuests: [],
            achievements: [],
            stats: {
                totalGoldEarned: 0,
                totalWorkDone: 0,
                itemsCrafted: 0,
                questsCompleted: 0
            },
            lastLogin: Date.now(),
            lastBankUpdate: Date.now()
        };

        const jobs = [
            { id: 'farming', name: 'üåæ –§–µ—Ä–º–µ—Ä—Å—Ç–≤–æ', description: '–í—ã—Ä–∞—â–∏–≤–∞–π—Ç–µ —É—Ä–æ–∂–∞–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∑–æ–ª–æ—Ç–æ', reward: 15, expReward: 10, energyCost: 10, time: 2000, requiredLevel: 1 },
            { id: 'mining', name: '‚õèÔ∏è –î–æ–±—ã—á–∞ —Ä—É–¥—ã', description: '–î–æ–±—ã–≤–∞–π—Ç–µ —Ü–µ–Ω–Ω—É—é —Ä—É–¥—É –≤ —à–∞—Ö—Ç–∞—Ö', reward: 25, expReward: 15, energyCost: 15, time: 3000, requiredLevel: 3 },
            { id: 'smithing', name: '‚öíÔ∏è –ö—É–∑–Ω–µ—á–Ω–æ–µ –¥–µ–ª–æ', description: '–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ä—É–∂–∏–µ –∏ –¥–æ—Å–ø–µ—Ö–∏', reward: 40, expReward: 25, energyCost: 20, time: 4000, requiredLevel: 5 },
            { id: 'trading', name: 'üíº –¢–æ—Ä–≥–æ–≤–ª—è', description: '–ü–æ–∫—É–ø–∞–π—Ç–µ –∏ –ø—Ä–æ–¥–∞–≤–∞–π—Ç–µ —Ç–æ–≤–∞—Ä—ã', reward: 50, expReward: 30, energyCost: 15, time: 3500, requiredLevel: 7 },
            { id: 'alchemy', name: 'üß™ –ê–ª—Ö–∏–º–∏—è', description: '–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–µ–ª—å—è –∏ —ç–ª–∏–∫—Å–∏—Ä—ã', reward: 70, expReward: 40, energyCost: 25, time: 5000, requiredLevel: 10 },
            { id: 'hunting', name: 'üèπ –û—Ö–æ—Ç–∞', description: '–û—Ö–æ—Ç—å—Ç–µ—Å—å –Ω–∞ –¥–∏–∫–∏—Ö –∑–≤–µ—Ä–µ–π', reward: 60, expReward: 35, energyCost: 30, time: 4500, requiredLevel: 8 }
        ];

        const marketItems = [
            { id: 'sword', name: '‚öîÔ∏è –ú–µ—á', icon: '‚öîÔ∏è', buyPrice: 200, sellPrice: 100, description: '–û—Å—Ç—Ä—ã–π –±–æ–µ–≤–æ–π –º–µ—á' },
            { id: 'shield', name: 'üõ°Ô∏è –©–∏—Ç', icon: 'üõ°Ô∏è', buyPrice: 150, sellPrice: 75, description: '–ö—Ä–µ–ø–∫–∏–π –∑–∞—â–∏—Ç–Ω—ã–π —â–∏—Ç' },
            { id: 'potion', name: 'üß™ –ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è', icon: 'üß™', buyPrice: 50, sellPrice: 25, description: '–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ' },
            { id: 'armor', name: 'üõ°Ô∏è –î–æ—Å–ø–µ—Ö–∏', icon: 'üõ°Ô∏è', buyPrice: 300, sellPrice: 150, description: '–ü—Ä–æ—á–Ω—ã–µ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –¥–æ—Å–ø–µ—Ö–∏' },
            { id: 'gem', name: 'üíé –î—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–π –∫–∞–º–µ–Ω—å', icon: 'üíé', buyPrice: 500, sellPrice: 250, description: '–†–µ–¥–∫–∏–π –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–π –∫–∞–º–µ–Ω—å' },
            { id: 'food', name: 'üçñ –ï–¥–∞', icon: 'üçñ', buyPrice: 30, sellPrice: 15, description: '–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é' }
        ];

        const achievements = [
            { id: 'first_gold', name: '–ü–µ—Ä–≤–æ–µ –∑–æ–ª–æ—Ç–æ', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 100 –∑–æ–ª–æ—Ç–∞', icon: 'üí∞', check: () => gameData.stats.totalGoldEarned >= 100 },
            { id: 'hard_worker', name: '–¢—Ä—É–¥—è–≥–∞', description: '–í—ã–ø–æ–ª–Ω–∏—Ç–µ 50 —Ä–∞–±–æ—Ç', icon: '‚öíÔ∏è', check: () => gameData.stats.totalWorkDone >= 50 },
            { id: 'level_5', name: '–û–ø—ã—Ç–Ω—ã–π –∏—Å–∫–∞—Ç–µ–ª—å', description: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 5 —É—Ä–æ–≤–Ω—è', icon: '‚≠ê', check: () => gameData.level >= 5 },
            { id: 'rich', name: '–ë–æ–≥–∞—á', description: '–ù–∞–∫–æ–ø–∏—Ç–µ 1000 –∑–æ–ª–æ—Ç–∞', icon: 'üíé', check: () => gameData.gold >= 1000 },
            { id: 'craftsman', name: '–ú–∞—Å—Ç–µ—Ä —Ä–µ–º–µ—Å–ª–∞', description: '–°–æ–∑–¥–∞–π—Ç–µ 20 –ø—Ä–µ–¥–º–µ—Ç–æ–≤', icon: 'üî®', check: () => gameData.stats.itemsCrafted >= 20 },
            { id: 'quest_master', name: '–ú–∞—Å—Ç–µ—Ä –∫–≤–µ—Å—Ç–æ–≤', description: '–í—ã–ø–æ–ª–Ω–∏—Ç–µ 10 –∫–≤–µ—Å—Ç–æ–≤', icon: 'üìú', check: () => gameData.stats.questsCompleted >= 10 },
            { id: 'banker', name: '–ë–∞–Ω–∫–∏—Ä', description: '–ü–æ–ª–æ–∂–∏—Ç–µ –≤ –±–∞–Ω–∫ 500 –∑–æ–ª–æ—Ç–∞', icon: 'üè¶', check: () => gameData.bankBalance >= 500 },
            { id: 'level_10', name: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –≥–µ—Ä–æ–π', description: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 10 —É—Ä–æ–≤–Ω—è', icon: 'üëë', check: () => gameData.level >= 10 }
        ];

        let dailyQuests = [];
        let workingJobs = new Set();

        function initTelegramData() {
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                const user = tg.initDataUnsafe.user;
                gameData.username = user.first_name || user.username || '–ò–≥—Ä–æ–∫';
                
                if (user.photo_url) {
                    gameData.avatar = user.photo_url;
                    document.getElementById('avatar').innerHTML = `<img src="${user.photo_url}" alt="Avatar">`;
                } else {
                    const firstLetter = gameData.username.charAt(0).toUpperCase();
                    document.getElementById('avatar').textContent = firstLetter;
                }
            }
            document.getElementById('username').textContent = gameData.username;
        }

        async function loadGameData() {
            try {
                const savedData = await window.storage.get('medieval_rpg_save', false);
                if (savedData && savedData.value) {
                    gameData = JSON.parse(savedData.value
